import{k as H,b as be,d as J,i as ge,u as he,E as A,_ as _e,w as ke,Z as Ve,l as Ye,a6 as De}from"./base-COint-0-.js";import{E as Fe}from"./el-button-Bmuing9d.js";import{J as K,a5 as Ee,aW as He,aX as Xe,r as E,aY as je,C as Ke,c as g,s as we,B as Ne,o as Te,j as p,k as ae,w as v,d as c,T as We,b as y,z as u,f as e,A as Le,y as Ze,e as b,az as qe,a as h,F as ne,K as Ge,L as Je,M as L,n as ye,t as le,aZ as Qe,a_ as Ue,l as Oe,a$ as et,b0 as tt,g as st,m as ot,v as at,aR as nt,R as lt,aE as ze,b1 as Se,b2 as $e,H as rt,b3 as it,b4 as ct,b5 as ut,b6 as dt,_ as ft,p as pt}from"./index-D3JvHN-W.js";import{u as vt}from"./errorStor-Cu3XsOf4.js";import{a as X}from"./index-DIeYr67b.js";import{E as mt,u as gt,a as wt}from"./focus-trap-CJCppc4l.js";import{E as yt}from"./index-Ch77k0nh.js";import{m as Pe,E as F}from"./aria-Dcom87Zv.js";import{u as Ae,d as bt,k as ht}from"./use-global-config-CDcpUNXh.js";import{t as me}from"./throttle-CvgtMyWL.js";import"./use-form-common-props-BrhWD8tu.js";import"./debounce-aSiB0j9C.js";const _t=(d,_)=>{if(!H||!d||!_)return!1;const l=d.getBoundingClientRect();let a;return _ instanceof Element?a=_.getBoundingClientRect():a={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},l.top<a.bottom&&l.bottom>a.top&&l.right>a.left&&l.left<a.right},kt=be({urlList:{type:J(Array),default:()=>Pe([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},showProgress:{type:Boolean,default:!1},crossorigin:{type:J(String)}}),It={close:()=>!0,switch:d=>ge(d),rotate:d=>ge(d)},Ct=K({name:"ElImageViewer"}),Et=K({...Ct,props:kt,emits:It,setup(d,{expose:_,emit:l}){var a;const o=d,r={CONTAIN:{name:"contain",icon:Ee(He)},ORIGINAL:{name:"original",icon:Ee(Xe)}};let I,M="";const{t:Y}=Ae(),n=he("image-viewer"),{nextZIndex:x}=bt(),S=E(),D=E([]),B=je(),w=E(!0),k=E(o.initialIndex),T=Ke(r.CONTAIN),f=E({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),re=E((a=o.zIndex)!=null?a:x()),W=g(()=>{const{urlList:t}=o;return t.length<=1}),Q=g(()=>k.value===0),Z=g(()=>k.value===o.urlList.length-1),q=g(()=>o.urlList[k.value]),ie=g(()=>[n.e("btn"),n.e("prev"),n.is("disabled",!o.infinite&&Q.value)]),ce=g(()=>[n.e("btn"),n.e("next"),n.is("disabled",!o.infinite&&Z.value)]),U=g(()=>{const{scale:t,deg:m,offsetX:i,offsetY:z,enableTransition:R}=f.value;let N=i/t,P=z/t;const G=m*Math.PI/180,Ie=Math.cos(G),Ce=Math.sin(G);N=N*Ie+P*Ce,P=P*Ie-i/t*Ce;const ve={transform:`scale(${t}) rotate(${m}deg) translate(${N}px, ${P}px)`,transition:R?"transform .3s":""};return T.value.name===r.CONTAIN.name&&(ve.maxWidth=ve.maxHeight="100%"),ve}),ee=g(()=>`${k.value+1} / ${o.urlList.length}`);function V(){se(),I==null||I(),document.body.style.overflow=M,l("close")}function te(){const t=me(i=>{switch(i.code){case F.esc:o.closeOnPressEscape&&V();break;case F.space:$();break;case F.left:fe();break;case F.up:O("zoomIn");break;case F.right:pe();break;case F.down:O("zoomOut");break}}),m=me(i=>{const z=i.deltaY||i.deltaX;O(z<0?"zoomIn":"zoomOut",{zoomRate:o.zoomRate,enableTransition:!1})});B.run(()=>{X(document,"keydown",t),X(document,"wheel",m)})}function se(){B.stop()}function ue(){w.value=!1}function de(t){w.value=!1,t.target.alt=Y("el.image.error")}function s(t){if(w.value||t.button!==0||!S.value)return;f.value.enableTransition=!1;const{offsetX:m,offsetY:i}=f.value,z=t.pageX,R=t.pageY,N=me(G=>{f.value={...f.value,offsetX:m+G.pageX-z,offsetY:i+G.pageY-R}}),P=X(document,"mousemove",N);X(document,"mouseup",()=>{P()}),t.preventDefault()}function C(){f.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function $(){if(w.value)return;const t=ht(r),m=Object.values(r),i=T.value.name,R=(m.findIndex(N=>N.name===i)+1)%t.length;T.value=r[t[R]],C()}function oe(t){const m=o.urlList.length;k.value=(t+m)%m}function fe(){Q.value&&!o.infinite||oe(k.value-1)}function pe(){Z.value&&!o.infinite||oe(k.value+1)}function O(t,m={}){if(w.value)return;const{minScale:i,maxScale:z}=o,{zoomRate:R,rotateDeg:N,enableTransition:P}={zoomRate:o.zoomRate,rotateDeg:90,enableTransition:!0,...m};switch(t){case"zoomOut":f.value.scale>i&&(f.value.scale=Number.parseFloat((f.value.scale/R).toFixed(3)));break;case"zoomIn":f.value.scale<z&&(f.value.scale=Number.parseFloat((f.value.scale*R).toFixed(3)));break;case"clockwise":f.value.deg+=N,l("rotate",f.value.deg);break;case"anticlockwise":f.value.deg-=N,l("rotate",f.value.deg);break}f.value.enableTransition=P}function Me(t){var m;((m=t.detail)==null?void 0:m.focusReason)==="pointer"&&t.preventDefault()}function xe(){o.closeOnPressEscape&&V()}function Be(t){if(t.ctrlKey){if(t.deltaY<0)return t.preventDefault(),!1;if(t.deltaY>0)return t.preventDefault(),!1}}return we(q,()=>{Ne(()=>{const t=D.value[0];t!=null&&t.complete||(w.value=!0)})}),we(k,t=>{C(),l("switch",t)}),Te(()=>{te(),I=X("wheel",Be,{passive:!1}),M=document.body.style.overflow,document.body.style.overflow="hidden"}),_({setActiveItem:oe}),(t,m)=>(p(),ae(e(yt),{to:"body",disabled:!t.teleported},{default:v(()=>[c(We,{name:"viewer-fade",appear:""},{default:v(()=>[y("div",{ref_key:"wrapper",ref:S,tabindex:-1,class:u(e(n).e("wrapper")),style:Le({zIndex:re.value})},[c(e(mt),{loop:"",trapped:"","focus-trap-el":S.value,"focus-start-el":"container",onFocusoutPrevented:Me,onReleaseRequested:xe},{default:v(()=>[y("div",{class:u(e(n).e("mask")),onClick:Ze(i=>t.hideOnClickModal&&V(),["self"])},null,10,["onClick"]),b(" CLOSE "),y("span",{class:u([e(n).e("btn"),e(n).e("close")]),onClick:V},[c(e(A),null,{default:v(()=>[c(e(qe))]),_:1})],2),b(" ARROW "),e(W)?b("v-if",!0):(p(),h(ne,{key:0},[y("span",{class:u(e(ie)),onClick:fe},[c(e(A),null,{default:v(()=>[c(e(Ge))]),_:1})],2),y("span",{class:u(e(ce)),onClick:pe},[c(e(A),null,{default:v(()=>[c(e(Je))]),_:1})],2)],64)),t.showProgress?(p(),h("div",{key:1,class:u([e(n).e("btn"),e(n).e("progress")])},[L(t.$slots,"progress",{activeIndex:k.value,total:t.urlList.length},()=>[ye(le(e(ee)),1)])],2)):b("v-if",!0),b(" ACTIONS "),y("div",{class:u([e(n).e("btn"),e(n).e("actions")])},[y("div",{class:u(e(n).e("actions__inner"))},[L(t.$slots,"toolbar",{actions:O,prev:fe,next:pe,reset:$,activeIndex:k.value,setActiveItem:oe},()=>[c(e(A),{onClick:i=>O("zoomOut")},{default:v(()=>[c(e(Qe))]),_:1},8,["onClick"]),c(e(A),{onClick:i=>O("zoomIn")},{default:v(()=>[c(e(Ue))]),_:1},8,["onClick"]),y("i",{class:u(e(n).e("actions__divider"))},null,2),c(e(A),{onClick:$},{default:v(()=>[(p(),ae(Oe(e(T).icon)))]),_:1}),y("i",{class:u(e(n).e("actions__divider"))},null,2),c(e(A),{onClick:i=>O("anticlockwise")},{default:v(()=>[c(e(et))]),_:1},8,["onClick"]),c(e(A),{onClick:i=>O("clockwise")},{default:v(()=>[c(e(tt))]),_:1},8,["onClick"])])],2)],2),b(" CANVAS "),y("div",{class:u(e(n).e("canvas"))},[(p(!0),h(ne,null,st(t.urlList,(i,z)=>ot((p(),h("img",{ref_for:!0,ref:R=>D.value[z]=R,key:i,src:i,style:Le(e(U)),class:u(e(n).e("img")),crossorigin:t.crossorigin,onLoad:ue,onError:de,onMousedown:s},null,46,["src","crossorigin"])),[[at,z===k.value]])),128))],2),L(t.$slots,"default")]),_:3},8,["focus-trap-el"])],6)]),_:3})]),_:3},8,["disabled"]))}});var Lt=_e(Et,[["__file","image-viewer.vue"]]);const zt=ke(Lt),St=be({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:J([String,Object])},previewSrcList:{type:J(Array),default:()=>Pe([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},showProgress:{type:Boolean,default:!1},crossorigin:{type:J(String)}}),$t={load:d=>d instanceof Event,error:d=>d instanceof Event,switch:d=>ge(d),close:()=>!0,show:()=>!0},Rt=K({name:"ElImage",inheritAttrs:!1}),Nt=K({...Rt,props:St,emits:$t,setup(d,{expose:_,emit:l}){const a=d,{t:o}=Ae(),r=he("image"),I=nt(),M=g(()=>Ve(Object.entries(I).filter(([s])=>/^(data-|on[A-Z])/i.test(s)||["id","style"].includes(s)))),Y=gt({excludeListeners:!0,excludeKeys:g(()=>Object.keys(M.value))}),n=E(),x=E(!1),S=E(!0),D=E(!1),B=E(),w=E(),k=H&&"loading"in HTMLImageElement.prototype;let T;const f=g(()=>[r.e("inner"),W.value&&r.e("preview"),S.value&&r.is("loading")]),re=g(()=>{const{fit:s}=a;return H&&s?{objectFit:s}:{}}),W=g(()=>{const{previewSrcList:s}=a;return lt(s)&&s.length>0}),Q=g(()=>{const{previewSrcList:s,initialIndex:C}=a;let $=C;return C>s.length-1&&($=0),$}),Z=g(()=>a.loading==="eager"?!1:!k&&a.loading==="lazy"||a.lazy),q=()=>{H&&(S.value=!0,x.value=!1,n.value=a.src)};function ie(s){S.value=!1,x.value=!1,l("load",s)}function ce(s){S.value=!1,x.value=!0,l("error",s)}function U(){_t(B.value,w.value)&&(q(),te())}const ee=De(U,200,!0);async function V(){var s;if(!H)return;await Ne();const{scrollContainer:C}=a;Ye(C)?w.value=C:rt(C)&&C!==""?w.value=(s=document.querySelector(C))!=null?s:void 0:B.value&&(w.value=wt(B.value)),w.value&&(T=X(w,"scroll",ee),setTimeout(()=>U(),100))}function te(){!H||!w.value||!ee||(T==null||T(),w.value=void 0)}function se(){W.value&&(D.value=!0,l("show"))}function ue(){D.value=!1,l("close")}function de(s){l("switch",s)}return we(()=>a.src,()=>{Z.value?(S.value=!0,x.value=!1,te(),V()):q()}),Te(()=>{Z.value?V():q()}),_({showPreview:se}),(s,C)=>(p(),h("div",ze({ref_key:"container",ref:B},e(M),{class:[e(r).b(),s.$attrs.class]}),[x.value?L(s.$slots,"error",{key:0},()=>[y("div",{class:u(e(r).e("error"))},le(e(o)("el.image.error")),3)]):(p(),h(ne,{key:1},[n.value!==void 0?(p(),h("img",ze({key:0},e(Y),{src:n.value,loading:s.loading,style:e(re),class:e(f),crossorigin:s.crossorigin,onClick:se,onLoad:ie,onError:ce}),null,16,["src","loading","crossorigin"])):b("v-if",!0),S.value?(p(),h("div",{key:1,class:u(e(r).e("wrapper"))},[L(s.$slots,"placeholder",{},()=>[y("div",{class:u(e(r).e("placeholder"))},null,2)])],2)):b("v-if",!0)],64)),e(W)?(p(),h(ne,{key:2},[D.value?(p(),ae(e(zt),{key:0,"z-index":s.zIndex,"initial-index":e(Q),infinite:s.infinite,"zoom-rate":s.zoomRate,"min-scale":s.minScale,"max-scale":s.maxScale,"show-progress":s.showProgress,"url-list":s.previewSrcList,crossorigin:s.crossorigin,"hide-on-click-modal":s.hideOnClickModal,teleported:s.previewTeleported,"close-on-press-escape":s.closeOnPressEscape,onClose:ue,onSwitch:de},{progress:v($=>[L(s.$slots,"progress",Se($e($)))]),toolbar:v($=>[L(s.$slots,"toolbar",Se($e($)))]),default:v(()=>[s.$slots.viewer?(p(),h("div",{key:0},[L(s.$slots,"viewer")])):b("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","show-progress","url-list","crossorigin","hide-on-click-modal","teleported","close-on-press-escape"])):b("v-if",!0)],64)):b("v-if",!0)],16))}});var Tt=_e(Nt,[["__file","image.vue"]]);const Ot=ke(Tt),j={success:"icon-success",warning:"icon-warning",error:"icon-error",info:"icon-info"},Re={[j.success]:it,[j.warning]:ct,[j.error]:ut,[j.info]:dt},Pt=be({title:{type:String,default:""},subTitle:{type:String,default:""},icon:{type:String,values:["success","warning","info","error"],default:"info"}}),At=K({name:"ElResult"}),Mt=K({...At,props:Pt,setup(d){const _=d,l=he("result"),a=g(()=>{const o=_.icon,r=o&&j[o]?j[o]:"icon-info",I=Re[r]||Re["icon-info"];return{class:r,component:I}});return(o,r)=>(p(),h("div",{class:u(e(l).b())},[y("div",{class:u(e(l).e("icon"))},[L(o.$slots,"icon",{},()=>[e(a).component?(p(),ae(Oe(e(a).component),{key:0,class:u(e(a).class)},null,8,["class"])):b("v-if",!0)])],2),o.title||o.$slots.title?(p(),h("div",{key:0,class:u(e(l).e("title"))},[L(o.$slots,"title",{},()=>[y("p",null,le(o.title),1)])],2)):b("v-if",!0),o.subTitle||o.$slots["sub-title"]?(p(),h("div",{key:1,class:u(e(l).e("subtitle"))},[L(o.$slots,"sub-title",{},()=>[y("p",null,le(o.subTitle),1)])],2)):b("v-if",!0),o.$slots.extra?(p(),h("div",{key:2,class:u(e(l).e("extra"))},[L(o.$slots,"extra")],2)):b("v-if",!0)],2))}});var xt=_e(Mt,[["__file","result.vue"]]);const Bt=ke(xt),Vt={class:"error-page"},Yt={__name:"Error",setup(d){const _=pt(),l=vt(),a=()=>{_.push("/")},o=()=>{const r=window.history.state.back;r?_.replace(r+"?retry="+Date.now()):_.go(-1)};return(r,I)=>{const M=Ot,Y=Fe,n=Bt;return p(),h("div",Vt,[c(n,{title:String(e(l).statusCode),"sub-title":e(l).errorMessage},{icon:v(()=>[c(M,{src:"https://shadow.elemecdn.com/app/element/hamburger.9cf7b091-55e9-11e9-a976-7f4d0b07eef6.png"})]),extra:v(()=>[c(Y,{type:"primary",onClick:a},{default:v(()=>I[0]||(I[0]=[ye("返回首页")])),_:1}),c(Y,{onClick:o},{default:v(()=>I[1]||(I[1]=[ye("重试页面")])),_:1})]),_:1},8,["title","sub-title"])])}}},Ut=ft(Yt,[["__scopeId","data-v-1a2f0162"]]);export{Ut as default};
