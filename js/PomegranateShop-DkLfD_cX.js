import{_ as ke,u as be,r as u,c as ie,o as j,s as re,x as Ce,a as c,b as e,d as v,w as _,e as M,T as ue,y as I,z as p,f as S,t as b,F as D,g as z,m as N,v as U,p as we,h as l,i as F,j as i,k as ce,l as xe,A as de,n as Le,B as me}from"./index-D3JvHN-W.js";import{E as Pe}from"./base-COint-0-.js";import{E as Se}from"./el-button-Bmuing9d.js";import{E as De,a as Te}from"./el-carousel-item-CyPtPMN3.js";import{r as Ae}from"./request-BkFvJOBV.js";import{E as Oe}from"./el-message-CSRVETfp.js";import"./use-global-config-CDcpUNXh.js";import"./use-form-common-props-BrhWD8tu.js";import"./index-DIeYr67b.js";import"./vnode-Dt7CZ6xF.js";import"./event-BB_Ol6Sd.js";import"./throttle-CvgtMyWL.js";import"./debounce-aSiB0j9C.js";import"./aria-Dcom87Zv.js";const Ve={class:"header"},$e={class:"mobile-nav"},Re=["onClick"],je={key:1,class:"nav desktop-nav"},Me={key:0,class:"user-info"},ze=["src"],Be={class:"loginOut-menu"},qe={key:1,class:"login"},Ne={class:"banner_container"},Ue=["src","onClick","onMouseenter"],Fe=["src","onClick","onMouseenter"],We={class:"main"},He={class:"carousel"},Je=["src","alt"],Qe={style:{color:"yellowgreen","text-align":"center","background-color":"darkcyan"},id:"production-list"},Ye={class:"grid_container"},Ge=["src","alt"],Ke={class:"price"},Xe={style:{color:"red","font-size":"1.5em"}},Ze={__name:"PomegranateShop",setup(et){const T=we(),h=be(),B=u(!1),ve=u(!1);h.initialize();const W=ie(()=>{var s;return h.userInfo.isAdmin||((s=h.userInfo.roles)==null?void 0:s.includes("admin"))}),_e=()=>{W.value?T.push("/Admin"):alert("您没有权限访问后台管理系统！")},pe=()=>{h.logout(),localStorage.removeItem("auth"),T.push("/PomegranateShop")},ge=s=>{T.push({name:"DetailsPage",params:{id:s}})};let H=u([]),J=u([]);j(async()=>{var V,$;const s=Object.assign({"/src/assets/img/banner_img/1.jpg":()=>l(()=>import("./1-BvH6V9EP.js"),[]),"/src/assets/img/banner_img/10.jpg":()=>l(()=>import("./10-Dvsa5YrB.js"),[]),"/src/assets/img/banner_img/11.jpg":()=>l(()=>import("./11-3-Rrm8IY.js"),[]),"/src/assets/img/banner_img/12.jpg":()=>l(()=>import("./12-CRtiScwQ.js"),[]),"/src/assets/img/banner_img/13.jpg":()=>l(()=>import("./13-CCn_dKiu.js"),[]),"/src/assets/img/banner_img/14.jpg":()=>l(()=>import("./14-BK9MqPAb.js"),[]),"/src/assets/img/banner_img/15.jpg":()=>l(()=>import("./15-LbiDWCOU.js"),[]),"/src/assets/img/banner_img/2.jpg":()=>l(()=>import("./2-CODDvFHm.js"),[]),"/src/assets/img/banner_img/3.jpg":()=>l(()=>import("./3-B60OxsqS.js"),[]),"/src/assets/img/banner_img/4.jpg":()=>l(()=>import("./4-AMeuewyT.js"),[]),"/src/assets/img/banner_img/5.jpg":()=>l(()=>import("./5-CYmlci21.js"),[]),"/src/assets/img/banner_img/6.jpg":()=>l(()=>import("./6-BoBcYitN.js"),[]),"/src/assets/img/banner_img/7.jpg":()=>l(()=>import("./7-BZi2vO0I.js"),[]),"/src/assets/img/banner_img/8.jpg":()=>l(()=>import("./8-tOqMqNoC.js"),[]),"/src/assets/img/banner_img/9.jpg":()=>l(()=>import("./9-DEiDn3Vv.js"),[])}),t=Object.assign({"/src/assets/img/carousel_img/555.png":()=>l(()=>import("./555-H4WuZq-U.js"),[]),"/src/assets/img/carousel_img/Snipaste_2024-11-04_20-54-57.png":()=>l(()=>import("./Snipaste_2024-11-04_20-54-57-D8noFLMC.js"),[]),"/src/assets/img/carousel_img/Snipaste_2025-03-26_02-20-33.png":()=>l(()=>import("./Snipaste_2025-03-26_02-20-33-8ys6C_Kd.js"),[]),"/src/assets/img/carousel_img/Snipaste_2025-03-27_18-55-00.png":()=>l(()=>import("./Snipaste_2025-03-27_18-55-00-BzpxtR8B.js"),[]),"/src/assets/img/carousel_img/Snipaste_2025-03-27_18-56-22.png":()=>l(()=>import("./Snipaste_2025-03-27_18-56-22-CnbqkcpZ.js"),[]),"/src/assets/img/carousel_img/f75a68709c8b56001701f836da5f22a.jpg":()=>l(()=>import("./f75a68709c8b56001701f836da5f22a-CpIZCVNq.js"),[]),"/src/assets/img/carousel_img/img1.jpeg":()=>l(()=>import("./img1-DI9M1Kcr.js"),[]),"/src/assets/img/carousel_img/register.jpg":()=>l(()=>import("./register-C-L1zqS1.js"),[])}),d=await Promise.all(Object.keys(s).map(async(r,E)=>({url:(await s[r]()).default,alt:`轮播图 ${E+1}`,index:E+1}))),f=await Promise.all(Object.keys(t).map(async(r,E)=>({url:(await t[r]()).default,alt:`轮播图 ${E+1}`,index:E+1}))),k=[];for(let r=0;r<d.length;r+=2)k.push({url:[(V=d[r])==null?void 0:V.url,($=d[r+1])==null?void 0:$.url].filter(Boolean),alt:[`${d[r].alt}-1`,d[r+1]?`${d[r+1].alt}-2`:""].filter(Boolean)});H.value=k,J.value=f});const m=u("石榴品种"),A=u([]),q=u([]),y=s=>{m.value=s,Q(),Y(),me(()=>{const t=document.getElementById("production-list");t&&t.scrollIntoView({behavior:"smooth",block:"start"})})},Q=()=>{q.value=A.value.filter(s=>s.type===m.value)},Y=()=>{localStorage.setItem("currentCategory",m.value),localStorage.setItem("productsData",JSON.stringify(A.value))},fe=()=>{const s=localStorage.getItem("currentCategory"),t=localStorage.getItem("productsData");s&&(m.value=s),t&&(A.value=JSON.parse(t))};j(async()=>{fe();try{const s=await Ae({method:"get",url:"/api/productions"});s.success&&(A.value=s.productions,Q(),Y())}catch(s){console.error("商品加载失败:",s),Oe.error("商品信息加载失败，请稍后重试"),T.push("/404")}finally{ve.value=!1}}),re(q,s=>{s.length>0&&me(()=>{const t=document.querySelectorAll(".card"),d=document.querySelector(".grid_container"),f=document.querySelector(".pointer");f.style.display="none",f.style.transition="0.2s all cubic-bezier(0.4, 0, 0.2, 1)",d.addEventListener("mouseenter",()=>f.style.display="none"),t.forEach(k=>{k.addEventListener("mouseenter",he),d.addEventListener("mouseleave",()=>{f.style.display="none"})})})});const he=s=>{const t=document.querySelector(".pointer");t.style.display="block",t.style.setProperty("--w",`${s.target.offsetWidth}px`),t.style.setProperty("--h",`${s.target.offsetHeight}px`),t.style.setProperty("--x",`${s.target.offsetLeft}px`),t.style.setProperty("--y",`${s.target.offsetTop}px`)},G=u(!1);j(()=>{window.addEventListener("scroll",K)}),Ce(()=>{window.removeEventListener("scroll",K)});const K=()=>{G.value=window.scrollY>500},ye=()=>{window.scrollTo({top:0,behavior:"smooth"})},g=u({groupIndex:-1,imgIndex:-1}),a=u(null),C=u(1.5),X=s=>{a.value&&(s.preventDefault(),C.value=Math.min(Math.max(C.value+(s.deltaY>0?-.1:.1),.3),1.5))};re(a,s=>{s?(C.value=.5,window.addEventListener("wheel",X,{passive:!1})):window.removeEventListener("wheel",X)});const Z=ie(()=>({transform:`translate(-50%, -50%) scale(${C.value})`,cursor:C.value>1?"zoom-out":"zoom-in"})),w=u(!1),O=u(!1),Ee=u([{path:"石榴品种",text:"品种"},{path:"石榴鲜食",text:"鲜食"},{path:"石榴饮品",text:"饮品"},{path:"石榴食用加工品",text:"食用加工品"},{path:"石榴保健加工品",text:"保健加工品"},{path:"石榴药用加工品",text:"药用加工品"}]);j(()=>{const s=()=>{O.value=window.innerWidth<768};s(),window.addEventListener("resize",s)});const Ie=s=>{w.value=!1,y(s)};return(s,t)=>{const d=Pe,f=F("router-link"),k=Te,V=De,$=F("DArrowRight"),r=Se,E=F("ArrowUpBold");return i(),c(D,null,[e("div",Ve,[t[15]||(t[15]=e("div",{class:"logo"},[e("img",{alt:"pomegranate_logo",src:"/public/pomegranate_logo.svg",height:"50px"})],-1)),O.value?(i(),c("div",{key:0,class:"mobile-menu-btn",onClick:t[0]||(t[0]=o=>w.value=!w.value)},[v(d,{size:24},{default:_(()=>[(i(),ce(xe(w.value?"CircleClose":"Menu")))]),_:1})])):M("",!0),v(ue,{name:"slide-down"},{default:_(()=>[N(e("div",$e,[(i(!0),c(D,null,z(Ee.value,(o,n)=>(i(),c("a",{key:n,onClick:R=>Ie(o.path),class:p({selected:m.value===o.path})},b(o.text),11,Re))),128))],512),[[U,O.value&&w.value]])]),_:1}),O.value?M("",!0):(i(),c("div",je,[e("ul",null,[e("li",null,[e("a",{href:"#production-list",onClick:t[1]||(t[1]=I(o=>y("石榴品种"),["prevent"])),class:p({selected:m.value==="石榴品种"})},"品种",2)]),e("li",null,[e("a",{href:"#production-list",onClick:t[2]||(t[2]=I(o=>y("石榴鲜食"),["prevent"])),class:p({selected:m.value==="石榴鲜食"})},"鲜食",2)]),e("li",null,[e("a",{href:"#production-list",onClick:t[3]||(t[3]=I(o=>y("石榴饮品"),["prevent"])),class:p({selected:m.value==="石榴饮品"})},"饮品",2)]),e("li",null,[e("a",{href:"#production-list",onClick:t[4]||(t[4]=I(o=>y("石榴食用加工品"),["prevent"])),class:p({selected:m.value==="石榴食用加工品"})},"食用加工品",2)]),e("li",null,[e("a",{href:"#production-list",onClick:t[5]||(t[5]=I(o=>y("石榴保健加工品"),["prevent"])),class:p({selected:m.value==="石榴保健加工品"})},"保健加工品",2)]),e("li",null,[e("a",{href:"#production-list",onClick:t[6]||(t[6]=I(o=>y("石榴药用加工品"),["prevent"])),class:p({selected:m.value==="石榴药用加工品"})},"药用加工品",2)])])])),e("div",{class:"user-container",onMouseenter:t[7]||(t[7]=o=>B.value=!0),onMouseleave:t[8]||(t[8]=o=>B.value=!1)},[S(h).isLoggedIn?(i(),c("div",Me,[e("img",{src:S(h).userInfo.avatar,alt:"头像",class:"avatar"},null,8,ze),e("span",null,b(S(h).userInfo.phone),1),v(ue,{name:"fade"},{default:_(()=>[N(e("div",Be,[e("div",{class:"menu-item",onClick:pe},t[12]||(t[12]=[e("span",null,"退出登录",-1)])),W.value?(i(),c("div",{key:0,class:"menu-item",onClick:_e},t[13]||(t[13]=[e("span",null,"后台管理",-1)]))):M("",!0)],512),[[U,B.value]])]),_:1})])):(i(),c("div",qe,[v(f,{to:{path:"/Login",query:{redirect:s.$route.fullPath}}},{default:_(()=>t[14]||(t[14]=[e("i",{title:"登录",class:"iconfont icon-denglu-yonghu"},null,-1)])),_:1},8,["to"])]))],32)]),e("div",Ne,[(i(!0),c(D,null,z(S(H),(o,n)=>{var R,ee,te,se,oe,le,ne,ae;return i(),c("div",{class:"banner_content",key:n},[e("img",{src:o.url[0],class:p({"hover-zoom":g.value.groupIndex===n&&g.value.imgIndex===0,expanded:((R=a.value)==null?void 0:R.groupIndex)===n&&((ee=a.value)==null?void 0:ee.imgIndex)===0}),onClick:x=>{var L,P;return a.value=((L=a.value)==null?void 0:L.groupIndex)===n&&((P=a.value)==null?void 0:P.imgIndex)===0?null:{groupIndex:n,imgIndex:0}},onMouseenter:x=>g.value={groupIndex:n,imgIndex:0},onMouseleave:t[9]||(t[9]=x=>g.value={groupIndex:-1,imgIndex:-1}),style:de(((te=a.value)==null?void 0:te.groupIndex)===n&&((se=a.value)==null?void 0:se.imgIndex)===0?Z.value:{})},null,46,Ue),e("img",{src:o.url[1],class:p({"hover-zoom":g.value.groupIndex===n&&g.value.imgIndex===1,expanded:((oe=a.value)==null?void 0:oe.groupIndex)===n&&((le=a.value)==null?void 0:le.imgIndex)===1}),onClick:x=>{var L,P;return a.value=((L=a.value)==null?void 0:L.groupIndex)===n&&((P=a.value)==null?void 0:P.imgIndex)===1?null:{groupIndex:n,imgIndex:1}},onMouseenter:x=>g.value={groupIndex:n,imgIndex:1},onMouseleave:t[10]||(t[10]=x=>g.value={groupIndex:-1,imgIndex:-1}),style:de(((ne=a.value)==null?void 0:ne.groupIndex)===n&&((ae=a.value)==null?void 0:ae.imgIndex)===1?Z.value:{})},null,46,Fe)])}),128)),a.value?(i(),c("div",{key:0,class:"zoom-overlay",onClick:t[11]||(t[11]=I(o=>a.value=null,["self"]))})):M("",!0)]),e("div",We,[t[18]||(t[18]=e("h1",null,"欢迎来到蒙自市石榴旗舰店",-1)),e("div",He,[v(V,{interval:4e3,type:"card",height:"400px"},{default:_(()=>[(i(!0),c(D,null,z(S(J),(o,n)=>(i(),ce(k,{key:n},{default:_(()=>[e("img",{src:o.url,alt:o.alt,style:{width:"100%",height:"100%","object-fit":"cover"}},null,8,Je)]),_:2},1024))),128))]),_:1})]),e("h2",Qe,b(m.value),1),e("div",Ye,[t[17]||(t[17]=e("div",{class:"pointer"},null,-1)),(i(!0),c(D,null,z(q.value,(o,n)=>(i(),c("div",{class:"card",key:n},[e("h2",null,b(o.name),1),e("img",{src:o.image,alt:o.name},null,8,Ge),e("p",null,b(o.description),1),e("div",Ke,[e("span",Xe,"¥"+b(o.price),1)]),v(r,{type:"success",onClick:R=>ge(o.id)},{default:_(()=>[t[16]||(t[16]=Le("去购买")),v(d,null,{default:_(()=>[v($)]),_:1})]),_:2},1032,["onClick"])]))),128))])]),t[19]||(t[19]=e("footer",{class:"site-footer",role:"contentinfo"},[e("div",{class:"footer-container"},[e("div",{class:"footer-section"},[e("div",{class:"brand-info"},[e("h3",{class:"footer-title"},"红河州蒙自市石榴旗舰店"),e("div",{class:"copyright"},[e("p",null,"© 2021-2025 石榴品牌旗舰店"),e("p",null,"云、滇-红河州-蒙自市-532503-661100"),e("img",{src:"/public/social_media_img/certification.png",title:"工商认证标识",alt:"工商认证标识",class:"certification"})])])]),e("div",{class:"footer-section"},[e("h3",{class:"footer-title"},"客户服务"),e("ul",{class:"link-list"},[e("li",null,[e("a",{href:"/CustomerService"},"常见问题")]),e("li",null,[e("a",{href:"/CustomerService"},"配送政策")]),e("li",null,[e("a",{href:"/CustomerService"},"退换货指南")]),e("li",null,[e("a",{href:"/CustomerService"},"订单查询")])])]),e("div",{class:"footer-section"},[e("h3",{class:"footer-title"},"法律条款"),e("ul",{class:"link-list"},[e("li",null,[e("a",{href:"/CustomerService"},"隐私政策")]),e("li",null,[e("a",{href:"/CustomerService"},"服务协议")]),e("li",null,[e("a",{href:"/CustomerService"},"免责声明")]),e("li",null,[e("a",{href:"/CustomerService"},"网站地图")])])]),e("div",{class:"footer-section"},[e("h3",{class:"footer-title"},"关注我们"),e("div",{class:"contact-info"},[e("p",null,"客服热线:0873-114"),e("p",null,"服务时间:9:00-21:00"),e("p",null,"邮箱:3283089140@qq.com")]),e("div",{class:"social-media"},[e("a",{href:"#",class:"social-icon wechat",title:"微信公众号"}),e("a",{href:"#",class:"social-icon qq",title:"QQ群"}),e("a",{href:"#",class:"social-icon douyin",title:"抖音账号"}),e("a",{href:"#",class:"social-icon weibo",title:"官方微博"})])])])],-1)),N(v(r,{class:"back-to-top",circle:"",onClick:ye,text:"",title:"回到顶部"},{default:_(()=>[v(d,null,{default:_(()=>[v(E)]),_:1})]),_:1},512),[[U,G.value]])],64)}}},pt=ke(Ze,[["__scopeId","data-v-1d7c828b"]]);export{pt as default};
