import{H as ae,C as ve,r as O,s as J,a0 as de,I as Io,B as A,J as Ce,aR as Mo,E as ko,c as w,aS as Bo,aT as To,o as Ae,aH as zo,j as m,a as P,e as C,F as Me,z as p,f as a,M as q,b as B,k as I,w as z,l as U,aE as je,d as X,aw as Lo,y as ue,aJ as ge,t as Y,A as he,a4 as ye,an as Po,a6 as Vo,x as ro,Z as Oo,aU as Ao,O as $o,a5 as Pe,af as Xe,$ as Fo,i as re,m as ke,S as me,n as Be,v as Te,T as No,D as uo,a3 as co,aA as qe}from"./index-BJ8CMOzX.js";import{E as Ro}from"./el-button-CtCx0wzE.js";import{a as ze,u as Ho}from"./index-BRO3r1ed.js";import{k as we,i as Ge,b as fo,f as xo,d as ce,e as Je,u as be,V as Do,p as Ko,E as te,_ as po,w as Uo,o as Ze,n as Qe,v as Yo,t as Wo,s as jo,q as Xo,a2 as qo,T as _e,a as Go,l as eo}from"./base-BrLvHeEz.js";import{m as Jo,E as Zo}from"./aria-Dcom87Zv.js";import{u as Qo}from"./index-DD6m2SLq.js";import{U as Ve,I as oo,C as no}from"./event-BB_Ol6Sd.js";import{u as _o,g as en,o as to,E as on}from"./focus-trap-CbSkDzOF.js";import{d as nn,e as tn,a as an,b as sn,c as ao}from"./use-form-common-props-0hT0vvR3.js";import{d as so,t as ln}from"./error-Cq9Fpw4b.js";import{P as Le}from"./vnode-Th6H0zNw.js";import{a as rn}from"./use-global-config-lAPLHJ-8.js";const un=()=>we&&/firefox/i.test(window.navigator.userAgent);let T;const cn={height:"0",visibility:"hidden",overflow:un()?"":"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},dn=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function fn(e){const t=window.getComputedStyle(e),s=t.getPropertyValue("box-sizing"),o=Number.parseFloat(t.getPropertyValue("padding-bottom"))+Number.parseFloat(t.getPropertyValue("padding-top")),r=Number.parseFloat(t.getPropertyValue("border-bottom-width"))+Number.parseFloat(t.getPropertyValue("border-top-width"));return{contextStyle:dn.map(u=>[u,t.getPropertyValue(u)]),paddingSize:o,borderSize:r,boxSizing:s}}function lo(e,t=1,s){var o;T||(T=document.createElement("textarea"),document.body.appendChild(T));const{paddingSize:r,borderSize:l,boxSizing:u,contextStyle:c}=fn(e);c.forEach(([v,b])=>T==null?void 0:T.style.setProperty(v,b)),Object.entries(cn).forEach(([v,b])=>T==null?void 0:T.style.setProperty(v,b,"important")),T.value=e.value||e.placeholder||"";let d=T.scrollHeight;const i={};u==="border-box"?d=d+l:u==="content-box"&&(d=d-r),T.value="";const g=T.scrollHeight-r;if(Ge(t)){let v=g*t;u==="border-box"&&(v=v+r+l),d=Math.max(v,d),i.minHeight=`${v}px`}if(Ge(s)){let v=g*s;u==="border-box"&&(v=v+r+l),d=Math.min(v,d)}return i.height=`${d}px`,(o=T.parentNode)==null||o.removeChild(T),T=void 0,i}const pn=fo({id:{type:String,default:void 0},size:xo,disabled:Boolean,modelValue:{type:ce([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:ce([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,showPassword:Boolean,showWordLimit:Boolean,suffixIcon:{type:Je},prefixIcon:{type:Je},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:ce([Object,Array,String]),default:()=>Jo({})},autofocus:Boolean,rows:{type:Number,default:2},...Qo(["ariaLabel"])}),mn={[Ve]:e=>ae(e),input:e=>ae(e),change:e=>ae(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent};function vn(e,{beforeFocus:t,afterFocus:s,beforeBlur:o,afterBlur:r}={}){const l=Io(),{emit:u}=l,c=ve(),d=O(!1),i=b=>{de(t)&&t(b)||d.value||(d.value=!0,u("focus",b),s==null||s())},g=b=>{var E;de(o)&&o(b)||b.relatedTarget&&((E=c.value)!=null&&E.contains(b.relatedTarget))||(d.value=!1,u("blur",b),r==null||r())},v=()=>{var b,E;(b=c.value)!=null&&b.contains(document.activeElement)&&c.value!==document.activeElement||(E=e.value)==null||E.focus()};return J(c,b=>{b&&b.setAttribute("tabindex","-1")}),ze(c,"focus",i,!0),ze(c,"blur",g,!0),ze(c,"click",v,!0),{isFocused:d,wrapperRef:c,handleFocus:i,handleBlur:g}}const gn=e=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(e);function hn({afterComposition:e,emit:t}){const s=O(!1),o=c=>{t==null||t("compositionstart",c),s.value=!0},r=c=>{var d;t==null||t("compositionupdate",c);const i=(d=c.target)==null?void 0:d.value,g=i[i.length-1]||"";s.value=!gn(g)},l=c=>{t==null||t("compositionend",c),s.value&&(s.value=!1,A(()=>e(c)))};return{isComposing:s,handleComposition:c=>{c.type==="compositionend"?l(c):r(c)},handleCompositionStart:o,handleCompositionUpdate:r,handleCompositionEnd:l}}function yn(e){let t;function s(){if(e.value==null)return;const{selectionStart:r,selectionEnd:l,value:u}=e.value;if(r==null||l==null)return;const c=u.slice(0,Math.max(0,r)),d=u.slice(Math.max(0,l));t={selectionStart:r,selectionEnd:l,value:u,beforeTxt:c,afterTxt:d}}function o(){if(e.value==null||t==null)return;const{value:r}=e.value,{beforeTxt:l,afterTxt:u,selectionStart:c}=t;if(l==null||u==null||c==null)return;let d=r.length;if(r.endsWith(u))d=r.length-u.length;else if(r.startsWith(l))d=l.length;else{const i=l[c-1],g=r.indexOf(i,c-1);g!==-1&&(d=g+1)}e.value.setSelectionRange(d,d)}return[s,o]}const bn="ElInput",Cn=Ce({name:bn,inheritAttrs:!1}),wn=Ce({...Cn,props:pn,emits:mn,setup(e,{expose:t,emit:s}){const o=e,r=Mo(),l=_o(),u=ko(),c=w(()=>[o.type==="textarea"?V.b():f.b(),f.m(b.value),f.is("disabled",E.value),f.is("exceed",vo.value),{[f.b("group")]:u.prepend||u.append,[f.m("prefix")]:u.prefix||o.prefixIcon,[f.m("suffix")]:u.suffix||o.suffixIcon||o.clearable||o.showPassword,[f.bm("suffix","password-clear")]:k.value&&ee.value,[f.b("hidden")]:o.type==="hidden"},r.class]),d=w(()=>[f.e("wrapper"),f.is("focus",D.value)]),{form:i,formItem:g}=nn(),{inputId:v}=tn(o,{formItemContext:g}),b=an(),E=sn(),f=be("input"),V=be("textarea"),$=ve(),M=ve(),F=O(!1),H=O(!1),Z=O(),W=ve(o.inputStyle),N=w(()=>$.value||M.value),{wrapperRef:x,isFocused:D,handleFocus:Q,handleBlur:_}=vn(N,{beforeFocus(){return E.value},afterBlur(){var n;o.validateEvent&&((n=g==null?void 0:g.validate)==null||n.call(g,"blur").catch(y=>so()))}}),R=w(()=>{var n;return(n=i==null?void 0:i.statusIcon)!=null?n:!1}),L=w(()=>(g==null?void 0:g.validateState)||""),K=w(()=>L.value&&Do[L.value]),pe=w(()=>H.value?Bo:To),Ee=w(()=>[r.style]),h=w(()=>[o.inputStyle,W.value,{resize:o.resize}]),S=w(()=>Ko(o.modelValue)?"":String(o.modelValue)),k=w(()=>o.clearable&&!E.value&&!o.readonly&&!!S.value&&(D.value||F.value)),ee=w(()=>o.showPassword&&!E.value&&!!S.value&&(!!S.value||D.value)),oe=w(()=>o.showWordLimit&&!!o.maxlength&&(o.type==="text"||o.type==="textarea")&&!E.value&&!o.readonly&&!o.showPassword),Se=w(()=>S.value.length),vo=w(()=>!!oe.value&&Se.value>Number(o.maxlength)),go=w(()=>!!u.suffix||!!o.suffixIcon||k.value||o.showPassword||oe.value||!!L.value&&R.value),[$e,Fe]=yn($);Ho(M,n=>{if(ho(),!oe.value||o.resize!=="both")return;const y=n[0],{width:ne}=y.contentRect;Z.value={right:`calc(100% - ${ne+15+6}px)`}});const le=()=>{const{type:n,autosize:y}=o;if(!(!we||n!=="textarea"||!M.value))if(y){const ne=ye(y)?y.minRows:void 0,Ye=ye(y)?y.maxRows:void 0,We=lo(M.value,ne,Ye);W.value={overflowY:"hidden",...We},A(()=>{M.value.offsetHeight,W.value=We})}else W.value={minHeight:lo(M.value).minHeight}},ho=(n=>{let y=!1;return()=>{var ne;if(y||!o.autosize)return;((ne=M.value)==null?void 0:ne.offsetParent)===null||(n(),y=!0)}})(le),ie=()=>{const n=N.value,y=o.formatter?o.formatter(S.value):S.value;!n||n.value===y||(n.value=y)},Ie=async n=>{$e();let{value:y}=n.target;if(o.formatter&&o.parser&&(y=o.parser(y)),!Re.value){if(y===S.value){ie();return}s(Ve,y),s(oo,y),await A(),ie(),Fe()}},Ne=n=>{let{value:y}=n.target;o.formatter&&o.parser&&(y=o.parser(y)),s(no,y)},{isComposing:Re,handleCompositionStart:He,handleCompositionUpdate:xe,handleCompositionEnd:De}=hn({emit:s,afterComposition:Ie}),yo=()=>{$e(),H.value=!H.value,setTimeout(Fe)},bo=()=>{var n;return(n=N.value)==null?void 0:n.focus()},Co=()=>{var n;return(n=N.value)==null?void 0:n.blur()},wo=n=>{F.value=!1,s("mouseleave",n)},Eo=n=>{F.value=!0,s("mouseenter",n)},Ke=n=>{s("keydown",n)},So=()=>{var n;(n=N.value)==null||n.select()},Ue=()=>{s(Ve,""),s(no,""),s("clear"),s(oo,"")};return J(()=>o.modelValue,()=>{var n;A(()=>le()),o.validateEvent&&((n=g==null?void 0:g.validate)==null||n.call(g,"change").catch(y=>so()))}),J(S,()=>ie()),J(()=>o.type,async()=>{await A(),ie(),le()}),Ae(()=>{!o.formatter&&o.parser,ie(),A(le)}),t({input:$,textarea:M,ref:N,textareaStyle:h,autosize:zo(o,"autosize"),isComposing:Re,focus:bo,blur:Co,select:So,clear:Ue,resizeTextarea:le}),(n,y)=>(m(),P("div",{class:p([a(c),{[a(f).bm("group","append")]:n.$slots.append,[a(f).bm("group","prepend")]:n.$slots.prepend}]),style:he(a(Ee)),onMouseenter:Eo,onMouseleave:wo},[C(" input "),n.type!=="textarea"?(m(),P(Me,{key:0},[C(" prepend slot "),n.$slots.prepend?(m(),P("div",{key:0,class:p(a(f).be("group","prepend"))},[q(n.$slots,"prepend")],2)):C("v-if",!0),B("div",{ref_key:"wrapperRef",ref:x,class:p(a(d))},[C(" prefix slot "),n.$slots.prefix||n.prefixIcon?(m(),P("span",{key:0,class:p(a(f).e("prefix"))},[B("span",{class:p(a(f).e("prefix-inner"))},[q(n.$slots,"prefix"),n.prefixIcon?(m(),I(a(te),{key:0,class:p(a(f).e("icon"))},{default:z(()=>[(m(),I(U(n.prefixIcon)))]),_:1},8,["class"])):C("v-if",!0)],2)],2)):C("v-if",!0),B("input",je({id:a(v),ref_key:"input",ref:$,class:a(f).e("inner")},a(l),{minlength:n.minlength,maxlength:n.maxlength,type:n.showPassword?H.value?"text":"password":n.type,disabled:a(E),readonly:n.readonly,autocomplete:n.autocomplete,tabindex:n.tabindex,"aria-label":n.ariaLabel,placeholder:n.placeholder,style:n.inputStyle,form:n.form,autofocus:n.autofocus,role:n.containerRole,onCompositionstart:a(He),onCompositionupdate:a(xe),onCompositionend:a(De),onInput:Ie,onChange:Ne,onKeydown:Ke}),null,16,["id","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","role","onCompositionstart","onCompositionupdate","onCompositionend"]),C(" suffix slot "),a(go)?(m(),P("span",{key:1,class:p(a(f).e("suffix"))},[B("span",{class:p(a(f).e("suffix-inner"))},[!a(k)||!a(ee)||!a(oe)?(m(),P(Me,{key:0},[q(n.$slots,"suffix"),n.suffixIcon?(m(),I(a(te),{key:0,class:p(a(f).e("icon"))},{default:z(()=>[(m(),I(U(n.suffixIcon)))]),_:1},8,["class"])):C("v-if",!0)],64)):C("v-if",!0),a(k)?(m(),I(a(te),{key:1,class:p([a(f).e("icon"),a(f).e("clear")]),onMousedown:ue(a(ge),["prevent"]),onClick:Ue},{default:z(()=>[X(a(Lo))]),_:1},8,["class","onMousedown"])):C("v-if",!0),a(ee)?(m(),I(a(te),{key:2,class:p([a(f).e("icon"),a(f).e("password")]),onClick:yo},{default:z(()=>[(m(),I(U(a(pe))))]),_:1},8,["class"])):C("v-if",!0),a(oe)?(m(),P("span",{key:3,class:p(a(f).e("count"))},[B("span",{class:p(a(f).e("count-inner"))},Y(a(Se))+" / "+Y(n.maxlength),3)],2)):C("v-if",!0),a(L)&&a(K)&&a(R)?(m(),I(a(te),{key:4,class:p([a(f).e("icon"),a(f).e("validateIcon"),a(f).is("loading",a(L)==="validating")])},{default:z(()=>[(m(),I(U(a(K))))]),_:1},8,["class"])):C("v-if",!0)],2)],2)):C("v-if",!0)],2),C(" append slot "),n.$slots.append?(m(),P("div",{key:1,class:p(a(f).be("group","append"))},[q(n.$slots,"append")],2)):C("v-if",!0)],64)):(m(),P(Me,{key:1},[C(" textarea "),B("textarea",je({id:a(v),ref_key:"textarea",ref:M,class:[a(V).e("inner"),a(f).is("focus",a(D))]},a(l),{minlength:n.minlength,maxlength:n.maxlength,tabindex:n.tabindex,disabled:a(E),readonly:n.readonly,autocomplete:n.autocomplete,style:a(h),"aria-label":n.ariaLabel,placeholder:n.placeholder,form:n.form,autofocus:n.autofocus,rows:n.rows,role:n.containerRole,onCompositionstart:a(He),onCompositionupdate:a(xe),onCompositionend:a(De),onInput:Ie,onFocus:a(Q),onBlur:a(_),onChange:Ne,onKeydown:Ke}),null,16,["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","role","onCompositionstart","onCompositionupdate","onCompositionend","onFocus","onBlur"]),a(oe)?(m(),P("span",{key:0,style:he(Z.value),class:p(a(f).e("count"))},Y(a(Se))+" / "+Y(n.maxlength),7)):C("v-if",!0)],64))],38))}});var En=po(wn,[["__file","input.vue"]]);const Sn=Uo(En),mo=e=>{if(!e)return{onClick:ge,onMousedown:ge,onMouseup:ge};let t=!1,s=!1;return{onClick:u=>{t&&s&&e(u),t=s=!1},onMousedown:u=>{t=u.target===u.currentTarget},onMouseup:u=>{s=u.target===u.currentTarget}}},In=fo({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:ce([String,Array,Object])},zIndex:{type:ce([String,Number])}}),Mn={click:e=>e instanceof MouseEvent},kn="overlay";var Bn=Ce({name:"ElOverlay",props:In,emits:Mn,setup(e,{slots:t,emit:s}){const o=be(kn),r=d=>{s("click",d)},{onClick:l,onMousedown:u,onMouseup:c}=mo(e.customMaskEvent?void 0:r);return()=>e.mask?X("div",{class:[o.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:l,onMousedown:u,onMouseup:c},[q(t,"default")],Le.STYLE|Le.CLASS|Le.PROPS,["onClick","onMouseup","onMousedown"]):Po("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[q(t,"default")])}});const Tn=Bn,zn=(e,t,s,o)=>{let r={offsetX:0,offsetY:0};const l=i=>{const g=i.clientX,v=i.clientY,{offsetX:b,offsetY:E}=r,f=e.value.getBoundingClientRect(),V=f.left,$=f.top,M=f.width,F=f.height,H=document.documentElement.clientWidth,Z=document.documentElement.clientHeight,W=-V+b,N=-$+E,x=H-V-M+b,D=Z-$-F+E,Q=R=>{let L=b+R.clientX-g,K=E+R.clientY-v;o!=null&&o.value||(L=Math.min(Math.max(L,W),x),K=Math.min(Math.max(K,N),D)),r={offsetX:L,offsetY:K},e.value&&(e.value.style.transform=`translate(${Ze(L)}, ${Ze(K)})`)},_=()=>{document.removeEventListener("mousemove",Q),document.removeEventListener("mouseup",_)};document.addEventListener("mousemove",Q),document.addEventListener("mouseup",_)},u=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",l)},c=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",l)},d=()=>{r={offsetX:0,offsetY:0},e.value&&(e.value.style.transform="none")};return Ae(()=>{Vo(()=>{s.value?u():c()})}),ro(()=>{c()}),{resetPosition:d}},Ln=(e,t={})=>{Oo(e)||ln("[useLockscreen]","You need to pass a ref param to this function");const s=t.ns||be("popup"),o=w(()=>s.bm("parent","hidden"));if(!we||Qe(document.body,o.value))return;let r=0,l=!1,u="0";const c=()=>{setTimeout(()=>{typeof document>"u"||l&&document&&(document.body.style.width=u,jo(document.body,o.value))},200)};J(e,d=>{if(!d){c();return}l=!Qe(document.body,o.value),l&&(u=document.body.style.width,Yo(document.body,o.value)),r=en(s.namespace.value);const i=document.documentElement.clientHeight<document.body.scrollHeight,g=Wo(document.body,"overflowY");r>0&&(i||g==="scroll")&&l&&(document.body.style.width=`calc(100% - ${r}px)`)}),Ao(()=>c())},Pn=e=>["",...Xo].includes(e),Oe="_trap-focus-children",G=[],io=e=>{if(G.length===0)return;const t=G[G.length-1][Oe];if(t.length>0&&e.code===Zo.tab){if(t.length===1){e.preventDefault(),document.activeElement!==t[0]&&t[0].focus();return}const s=e.shiftKey,o=e.target===t[0],r=e.target===t[t.length-1];o&&s&&(e.preventDefault(),t[t.length-1].focus()),r&&!s&&(e.preventDefault(),t[0].focus())}},Vn={beforeMount(e){e[Oe]=to(e),G.push(e),G.length<=1&&document.addEventListener("keydown",io)},updated(e){A(()=>{e[Oe]=to(e)})},unmounted(){G.shift(),G.length===0&&document.removeEventListener("keydown",io)}},On=Ce({name:"ElMessageBox",directives:{TrapFocus:Vn},components:{ElButton:Ro,ElFocusTrap:on,ElInput:Sn,ElOverlay:Tn,ElIcon:te,...qo},inheritAttrs:!1,props:{buttonSize:{type:String,validator:Pn},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,overflow:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(e,{emit:t}){const{locale:s,zIndex:o,ns:r,size:l}=rn("message-box",w(()=>e.buttonSize)),{t:u}=s,{nextZIndex:c}=o,d=O(!1),i=$o({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",closeIcon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:"",inputValidator:void 0,inputErrorMessage:"",message:"",modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonLoadingIcon:Pe(Xe),cancelButtonLoadingIcon:Pe(Xe),confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:c()}),g=w(()=>{const h=i.type;return{[r.bm("icon",h)]:h&&_e[h]}}),v=ao(),b=ao(),E=w(()=>{const h=i.type;return i.icon||h&&_e[h]||""}),f=w(()=>!!i.message),V=O(),$=O(),M=O(),F=O(),H=O(),Z=w(()=>i.confirmButtonClass);J(()=>i.inputValue,async h=>{await A(),e.boxType==="prompt"&&h&&L()},{immediate:!0}),J(()=>d.value,h=>{var S,k;h&&(e.boxType!=="prompt"&&(i.autofocus?M.value=(k=(S=H.value)==null?void 0:S.$el)!=null?k:V.value:M.value=V.value),i.zIndex=c()),e.boxType==="prompt"&&(h?A().then(()=>{var ee;F.value&&F.value.$el&&(i.autofocus?M.value=(ee=K())!=null?ee:V.value:M.value=V.value)}):(i.editorErrorMessage="",i.validateError=!1))});const W=w(()=>e.draggable),N=w(()=>e.overflow);zn(V,$,W,N),Ae(async()=>{await A(),e.closeOnHashChange&&window.addEventListener("hashchange",x)}),ro(()=>{e.closeOnHashChange&&window.removeEventListener("hashchange",x)});function x(){d.value&&(d.value=!1,A(()=>{i.action&&t("action",i.action)}))}const D=()=>{e.closeOnClickModal&&R(i.distinguishCancelAndClose?"close":"cancel")},Q=mo(D),_=h=>{if(i.inputType!=="textarea")return h.preventDefault(),R("confirm")},R=h=>{var S;e.boxType==="prompt"&&h==="confirm"&&!L()||(i.action=h,i.beforeClose?(S=i.beforeClose)==null||S.call(i,h,i,x):x())},L=()=>{if(e.boxType==="prompt"){const h=i.inputPattern;if(h&&!h.test(i.inputValue||""))return i.editorErrorMessage=i.inputErrorMessage||u("el.messagebox.error"),i.validateError=!0,!1;const S=i.inputValidator;if(de(S)){const k=S(i.inputValue);if(k===!1)return i.editorErrorMessage=i.inputErrorMessage||u("el.messagebox.error"),i.validateError=!0,!1;if(ae(k))return i.editorErrorMessage=k,i.validateError=!0,!1}}return i.editorErrorMessage="",i.validateError=!1,!0},K=()=>{var h,S;const k=(h=F.value)==null?void 0:h.$refs;return(S=k==null?void 0:k.input)!=null?S:k==null?void 0:k.textarea},pe=()=>{R("close")},Ee=()=>{e.closeOnPressEscape&&pe()};return e.lockScroll&&Ln(d),{...Fo(i),ns:r,overlayEvent:Q,visible:d,hasMessage:f,typeClass:g,contentId:v,inputId:b,btnSize:l,iconComponent:E,confirmButtonClasses:Z,rootRef:V,focusStartRef:M,headerRef:$,inputRef:F,confirmRef:H,doClose:x,handleClose:pe,onCloseRequested:Ee,handleWrapperClick:D,handleInputEnter:_,handleAction:R,t:u}}});function An(e,t,s,o,r,l){const u=re("el-icon"),c=re("el-input"),d=re("el-button"),i=re("el-focus-trap"),g=re("el-overlay");return m(),I(No,{name:"fade-in-linear",onAfterLeave:v=>e.$emit("vanish"),persisted:""},{default:z(()=>[ke(X(g,{"z-index":e.zIndex,"overlay-class":[e.ns.is("message-box"),e.modalClass],mask:e.modal},{default:z(()=>[B("div",{role:"dialog","aria-label":e.title,"aria-modal":"true","aria-describedby":e.showInput?void 0:e.contentId,class:p(`${e.ns.namespace.value}-overlay-message-box`),onClick:e.overlayEvent.onClick,onMousedown:e.overlayEvent.onMousedown,onMouseup:e.overlayEvent.onMouseup},[X(i,{loop:"",trapped:e.visible,"focus-trap-el":e.rootRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:z(()=>[B("div",{ref:"rootRef",class:p([e.ns.b(),e.customClass,e.ns.is("draggable",e.draggable),{[e.ns.m("center")]:e.center}]),style:he(e.customStyle),tabindex:"-1",onClick:ue(()=>{},["stop"])},[e.title!==null&&e.title!==void 0?(m(),P("div",{key:0,ref:"headerRef",class:p([e.ns.e("header"),{"show-close":e.showClose}])},[B("div",{class:p(e.ns.e("title"))},[e.iconComponent&&e.center?(m(),I(u,{key:0,class:p([e.ns.e("status"),e.typeClass])},{default:z(()=>[(m(),I(U(e.iconComponent)))]),_:1},8,["class"])):C("v-if",!0),B("span",null,Y(e.title),1)],2),e.showClose?(m(),P("button",{key:0,type:"button",class:p(e.ns.e("headerbtn")),"aria-label":e.t("el.messagebox.close"),onClick:v=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),onKeydown:me(ue(v=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"])},[X(u,{class:p(e.ns.e("close"))},{default:z(()=>[(m(),I(U(e.closeIcon||"close")))]),_:1},8,["class"])],42,["aria-label","onClick","onKeydown"])):C("v-if",!0)],2)):C("v-if",!0),B("div",{id:e.contentId,class:p(e.ns.e("content"))},[B("div",{class:p(e.ns.e("container"))},[e.iconComponent&&!e.center&&e.hasMessage?(m(),I(u,{key:0,class:p([e.ns.e("status"),e.typeClass])},{default:z(()=>[(m(),I(U(e.iconComponent)))]),_:1},8,["class"])):C("v-if",!0),e.hasMessage?(m(),P("div",{key:1,class:p(e.ns.e("message"))},[q(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(m(),I(U(e.showInput?"label":"p"),{key:1,for:e.showInput?e.inputId:void 0,innerHTML:e.message},null,8,["for","innerHTML"])):(m(),I(U(e.showInput?"label":"p"),{key:0,for:e.showInput?e.inputId:void 0},{default:z(()=>[Be(Y(e.dangerouslyUseHTMLString?"":e.message),1)]),_:1},8,["for"]))])],2)):C("v-if",!0)],2),ke(B("div",{class:p(e.ns.e("input"))},[X(c,{id:e.inputId,ref:"inputRef",modelValue:e.inputValue,"onUpdate:modelValue":v=>e.inputValue=v,type:e.inputType,placeholder:e.inputPlaceholder,"aria-invalid":e.validateError,class:p({invalid:e.validateError}),onKeydown:me(e.handleInputEnter,["enter"])},null,8,["id","modelValue","onUpdate:modelValue","type","placeholder","aria-invalid","class","onKeydown"]),B("div",{class:p(e.ns.e("errormsg")),style:he({visibility:e.editorErrorMessage?"visible":"hidden"})},Y(e.editorErrorMessage),7)],2),[[Te,e.showInput]])],10,["id"]),B("div",{class:p(e.ns.e("btns"))},[e.showCancelButton?(m(),I(d,{key:0,loading:e.cancelButtonLoading,"loading-icon":e.cancelButtonLoadingIcon,class:p([e.cancelButtonClass]),round:e.roundButton,size:e.btnSize,onClick:v=>e.handleAction("cancel"),onKeydown:me(ue(v=>e.handleAction("cancel"),["prevent"]),["enter"])},{default:z(()=>[Be(Y(e.cancelButtonText||e.t("el.messagebox.cancel")),1)]),_:1},8,["loading","loading-icon","class","round","size","onClick","onKeydown"])):C("v-if",!0),ke(X(d,{ref:"confirmRef",type:"primary",loading:e.confirmButtonLoading,"loading-icon":e.confirmButtonLoadingIcon,class:p([e.confirmButtonClasses]),round:e.roundButton,disabled:e.confirmButtonDisabled,size:e.btnSize,onClick:v=>e.handleAction("confirm"),onKeydown:me(ue(v=>e.handleAction("confirm"),["prevent"]),["enter"])},{default:z(()=>[Be(Y(e.confirmButtonText||e.t("el.messagebox.confirm")),1)]),_:1},8,["loading","loading-icon","class","round","disabled","size","onClick","onKeydown"]),[[Te,e.showConfirmButton]])],2)],14,["onClick"])]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,["aria-label","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["z-index","overlay-class","mask"]),[[Te,e.visible]])]),_:3},8,["onAfterLeave"])}var $n=po(On,[["render",An],["__file","index.vue"]]);const fe=new Map,Fn=e=>{let t=document.body;return e.appendTo&&(ae(e.appendTo)&&(t=document.querySelector(e.appendTo)),eo(e.appendTo)&&(t=e.appendTo),eo(t)||(t=document.body)),t},Nn=(e,t,s=null)=>{const o=X($n,e,de(e.message)||uo(e.message)?{default:de(e.message)?e.message:()=>e.message}:null);return o.appContext=s,co(o,t),Fn(e).appendChild(t.firstElementChild),o.component},Rn=()=>document.createElement("div"),Hn=(e,t)=>{const s=Rn();e.onVanish=()=>{co(null,s),fe.delete(r)},e.onAction=l=>{const u=fe.get(r);let c;e.showInput?c={value:r.inputValue,action:l}:c=l,e.callback?e.callback(c,o.proxy):l==="cancel"||l==="close"?e.distinguishCancelAndClose&&l!=="cancel"?u.reject("close"):u.reject("cancel"):u.resolve(c)};const o=Nn(e,s,t),r=o.proxy;for(const l in e)qe(e,l)&&!qe(r.$props,l)&&(l==="closeIcon"&&ye(e[l])?r[l]=Pe(e[l]):r[l]=e[l]);return r.visible=!0,r};function se(e,t=null){if(!we)return Promise.reject();let s;return ae(e)||uo(e)?e={message:e}:s=e.callback,new Promise((o,r)=>{const l=Hn(e,t??se._context);fe.set(l,{options:e,callback:s,resolve:o,reject:r})})}const xn=["alert","confirm","prompt"],Dn={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};xn.forEach(e=>{se[e]=Kn(e)});function Kn(e){return(t,s,o,r)=>{let l="";return ye(s)?(o=s,l=""):Go(s)?l="":l=s,se(Object.assign({title:l,message:t,type:"",...Dn[e]},o,{boxType:e}),r)}}se.close=()=>{fe.forEach((e,t)=>{t.doClose()}),fe.clear()};se._context=null;const j=se;j.install=e=>{j._context=e._context,e.config.globalProperties.$msgbox=j,e.config.globalProperties.$messageBox=j,e.config.globalProperties.$alert=j.alert,e.config.globalProperties.$confirm=j.confirm,e.config.globalProperties.$prompt=j.prompt};const nt=j;export{nt as E,Sn as a,un as b,vn as c,zn as d,Ln as e,Tn as f,mo as g,Pn as i,hn as u};
