import{_ as W,u as G,r as m,c as K,o as D,a as i,b as e,d as a,w as u,e as C,T as O,f,t as p,F as k,g as E,h as w,i as M,j as l,k as L,l as X,m as j,v as N,n as y,p as Y,q as Z}from"./index-BbgOGWtc.js";import{E as ee}from"./base-BBuVGrsO.js";import{E as te}from"./el-button-D1eLmx3x.js";import{_ as oe,a as se,E as re,b as le}from"./certification-DW8NWo5H.js";import{u as ne}from"./adminStore-BUizldsK.js";import{u as ae}from"./productionStore-Y8C8Beyj.js";import{u as ie}from"./errorStor-B6oedQtA.js";import{r as ue}from"./request-BkFvJOBV.js";import{E as R}from"./el-message-D3QXA0wy.js";import"./use-global-config-BqmYTjt1.js";import"./use-form-common-props-CiI_iKAU.js";import"./index-C6T8Vz6z.js";import"./vnode-bwl3DZST.js";import"./event-BB_Ol6Sd.js";import"./throttle-Ba8zRFDb.js";import"./debounce-00-5nJ5V.js";import"./aria-Dcom87Zv.js";const ce={class:"header"},de={class:"mobile-nav"},me=["onClick"],pe={key:1,class:"nav desktop-nav"},_e={key:0,class:"user-info"},ve=["src"],fe={class:"logout-menu"},ge={key:1,class:"login"},he={class:"main"},ke={class:"background_img"},ye=["src","alt"],be={class:"banner"},Se={class:"grid_container"},Ce=["src","alt"],Ee={style:{"margin-top":"10px"}},we={style:{color:"red"}},Pe={style:{"margin-top":"10px"}},xe={__name:"Home",setup(Ae){const _=Y(),q=Z(),d=G(),T=ne(),V=ae(),$=ie(),b=m(!1);d.initialize();const P=K(()=>{var t;const o=JSON.parse(localStorage.getItem("users"));if(o){const s=o.find(n=>n.phone===d.userInfo.phone);return s==null?void 0:s.isAdmin}return d.userInfo.isAdmin||((t=d.userInfo.roles)==null?void 0:t.includes("admin"))}),B=()=>{P.value&&_.push("/Admin")},H=()=>{d.logout(),localStorage.removeItem("auth"),_.push("/")},U=o=>{_.push({name:"DetailsPage",params:{id:o}})},S=m({});(async()=>{try{const o=await ue({method:"get",url:"/api/productions",timeout:1e4});if(o.success&&Array.isArray(o.productions)){const t=o.productions.reduce((s,n)=>{const c=n.type||"其他";return s[c]||(s[c]=[]),s[c].push(n),s},{});S.value=Object.entries(t).reduce((s,[n,c])=>(s[n]=c[Math.floor(Math.random()*c.length)],s),{}),T.totalProductions(o.productions.length),V.saveProductions(o.productions)}else console.error("响应数据格式错误:",o)}catch(o){console.error("完整错误详情：",o),o.code==="ECONNABORTED"?R.error("请求超时，请检查网络连接"):R.error(`数据获取失败：${o.message}`),$.setError(o.status,o.message),_.push("/Error")}return S.value})();let x=m([]);D(async()=>{const o=Object.assign({"/src/assets/local_img/background_img/background_img1.jpg":()=>w(()=>import("./background_img1-BnDMq5ei.js"),[]),"/src/assets/local_img/background_img/background_img2.jpg":()=>w(()=>import("./background_img2-BdC0eNkz.js"),[]),"/src/assets/local_img/background_img/background_img3.jpg":()=>w(()=>import("./background_img3-LnWTQOqg.js"),[])}),t=await Promise.all(Object.keys(o).map(async(s,n)=>({url:(await o[s]()).default,alt:`背景图 ${n+1}`,index:n+1})));x.value=t});const v=m(!1),g=m(!1);D(()=>{const o=()=>{g.value=window.innerWidth<768};o(),window.addEventListener("resize",o)});const z=m([{path:"/Home",text:"首页"},{path:"/PomegranateShop",text:"石榴商城"},{path:"/PomegranateStory",text:"石榴故事"},{path:"/AboutUs",text:"关于我们"}]),F=o=>{v.value=!1,_.push(o)};return(o,t)=>{const s=ee,n=M("router-link"),c=le,Q=re,A=M("DArrowRight"),I=te;return l(),i(k,null,[e("div",ce,[t[7]||(t[7]=e("div",{class:"logo"},[e("img",{alt:"pomegranate_logo",src:oe,width:"50px",height:"65px"}),e("strong",null,"蒙自石榴旗舰店")],-1)),g.value?(l(),i("div",{key:0,class:"mobile-menu-btn",onClick:t[0]||(t[0]=r=>v.value=!v.value)},[a(s,{size:24},{default:u(()=>[(l(),L(X(v.value?"CircleClose":"Menu")))]),_:1})])):C("",!0),a(O,{name:"slide-down"},{default:u(()=>[j(e("div",de,[(l(!0),i(k,null,E(z.value,(r,h)=>(l(),i("a",{key:h,onClick:J=>F(r.path)},p(r.text),9,me))),128))],512),[[N,g.value&&v.value]])]),_:1}),g.value?C("",!0):(l(),i("div",pe,t[3]||(t[3]=[e("a",{href:"/Home"},"首页",-1),e("a",{href:"/PomegranateShop",target:"_blank"},"石榴商城",-1),e("a",{href:"/PomegranateStory",target:"_blank"},"石榴故事",-1),e("a",{href:"/AboutUs",target:"_blank"},"关于我们",-1)]))),e("div",{class:"user-container",onMouseenter:t[1]||(t[1]=r=>b.value=!0),onMouseleave:t[2]||(t[2]=r=>b.value=!1)},[f(d).isLoggedIn?(l(),i("div",_e,[e("img",{src:f(d).userInfo.avatar,alt:"头像",class:"avatar"},null,8,ve),e("span",null,p(f(d).userInfo.phone),1),a(O,{name:"fade"},{default:u(()=>[j(e("div",fe,[e("div",{class:"menu-item",onClick:H},t[4]||(t[4]=[e("span",null,"退出登录",-1)])),P.value?(l(),i("div",{key:0,class:"menu-item",onClick:B},t[5]||(t[5]=[e("span",null,"后台管理",-1)]))):C("",!0)],512),[[N,b.value]])]),_:1})])):(l(),i("div",ge,[a(n,{to:{path:"/Login",query:{redirect:f(q).fullPath}}},{default:u(()=>t[6]||(t[6]=[e("i",{title:"登录",class:"iconfont icon-denglu-yonghu"},null,-1)])),_:1},8,["to"])]))],32)]),e("div",he,[e("div",ke,[a(Q,{trigger:"click",height:"680px","motion-blur":"","interval:8000":""},{default:u(()=>[(l(!0),i(k,null,E(f(x),r=>(l(),L(c,{key:r},{default:u(()=>[e("img",{src:r.url,alt:r.alt,style:{width:"100%",height:"100%","object-fit":"cover"}},null,8,ye)]),_:2},1024))),128))]),_:1})]),e("div",be,[t[12]||(t[12]=e("h1",null,"品类精选",-1)),e("div",Se,[(l(!0),i(k,null,E(S.value,(r,h)=>(l(),i("div",{class:"card",key:h},[e("h2",null,p(h)+"推荐",1),e("img",{src:r.image,alt:r.name},null,8,Ce),e("h3",null,p(r.name),1),e("span",null,p(r.description),1),e("p",Ee,[t[8]||(t[8]=y(" 价格:")),e("span",we,"¥"+p(r.price.toFixed(2)),1),t[9]||(t[9]=y("元 "))]),e("div",Pe,[a(n,{to:"/PomegranateShop"},{default:u(()=>[a(I,{type:"primary",plain:"",round:""},{default:u(()=>[t[10]||(t[10]=y(" 了解更多")),a(s,null,{default:u(()=>[a(A)]),_:1})]),_:1})]),_:1}),a(I,{type:"success",onClick:J=>U(r.id),plain:"",round:""},{default:u(()=>[t[11]||(t[11]=y(" 立即购买")),a(s,null,{default:u(()=>[a(A)]),_:1})]),_:2},1032,["onClick"])])]))),128))])])]),t[13]||(t[13]=e("footer",{class:"site-footer",role:"contentinfo"},[e("div",{class:"footer-container"},[e("div",{class:"footer-section"},[e("div",{class:"brand-info"},[e("h3",{class:"footer-title"},"红河州蒙自市石榴旗舰店"),e("div",{class:"copyright"},[e("p",null,"© 2021-2025 石榴品牌旗舰店"),e("p",null,"云、滇-红河州-蒙自市-532503-661100"),e("img",{src:se,title:"工商认证标识",alt:"工商认证标识",class:"certification"})])])]),e("div",{class:"footer-section"},[e("h3",{class:"footer-title"},"客户服务"),e("ul",{class:"link-list"},[e("li",null,[e("a",{href:"/CustomerService"},"常见问题")]),e("li",null,[e("a",{href:"/CustomerService"},"配送政策")]),e("li",null,[e("a",{href:"/CustomerService"},"退换货指南")]),e("li",null,[e("a",{href:"/CustomerService"},"订单查询")])])]),e("div",{class:"footer-section"},[e("h3",{class:"footer-title"},"法律条款"),e("ul",{class:"link-list"},[e("li",null,[e("a",{href:"/CustomerService"},"隐私政策")]),e("li",null,[e("a",{href:"/CustomerService"},"服务协议")]),e("li",null,[e("a",{href:"/CustomerService"},"免责声明")]),e("li",null,[e("a",{href:"/CustomerService"},"网站地图")])])]),e("div",{class:"footer-section"},[e("h3",{class:"footer-title"},"关注我们"),e("div",{class:"contact-info"},[e("p",null,"客服热线:0873-114"),e("p",null,"服务时间:9:00-21:00"),e("p",null,"邮箱:3283089140@qq.com")]),e("div",{class:"social-media"},[e("a",{href:"#",class:"social-icon wechat",title:"微信公众号"}),e("a",{href:"#",class:"social-icon qq",title:"QQ群"}),e("a",{href:"#",class:"social-icon douyin",title:"抖音账号"}),e("a",{href:"#",class:"social-icon weibo",title:"官方微博"})])])])],-1))],64)}}},Je=W(xe,[["__scopeId","data-v-29635d72"]]);export{Je as default};
