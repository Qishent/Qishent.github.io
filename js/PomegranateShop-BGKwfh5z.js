import{_ as ke,u as Ce,r as c,c as re,o as j,s as ie,x as be,a as u,b as e,d as m,w as v,e as M,T as ce,y as I,z as p,f as S,t as C,F as D,g as z,m as N,v as U,p as we,h as l,i as F,j as r,k as ue,l as xe,A as de,n as Le,B as _e}from"./index-BJ8CMOzX.js";import{E as Pe}from"./base-BrLvHeEz.js";import{E as Se}from"./el-button-CtCx0wzE.js";import{_ as De,a as Te,E as Ae,b as Oe}from"./certification-CIsFlkea.js";import{r as Ve}from"./request-D62Ehise.js";import{E as $e}from"./el-message-CDeRKx3U.js";import"./use-global-config-lAPLHJ-8.js";import"./use-form-common-props-0hT0vvR3.js";import"./index-BRO3r1ed.js";import"./vnode-Th6H0zNw.js";import"./event-BB_Ol6Sd.js";import"./throttle-1p68T3Z-.js";import"./debounce-DiltkV32.js";import"./aria-Dcom87Zv.js";const Re={class:"header"},je={class:"mobile-nav"},Me=["onClick"],ze={key:1,class:"nav desktop-nav"},Be={key:0,class:"user-info"},qe=["src"],Ne={class:"loginOut-menu"},Ue={key:1,class:"login"},Fe={class:"banner_container"},We=["src","onClick","onMouseenter"],He=["src","onClick","onMouseenter"],Je={class:"main"},Qe={class:"carousel"},Ye=["src","alt"],Ge={style:{color:"yellowgreen","text-align":"center","background-color":"darkcyan"},id:"production-list"},Ke={class:"grid_container"},Xe=["src","alt"],Ze={class:"price"},et={style:{color:"red","font-size":"1.5em"}},tt={__name:"PomegranateShop",setup(st){const T=we(),h=Ce(),B=c(!1),me=c(!1);h.initialize();const W=re(()=>{var s;return h.userInfo.isAdmin||((s=h.userInfo.roles)==null?void 0:s.includes("admin"))}),ve=()=>{W.value?T.push("/Admin"):alert("您没有权限访问后台管理系统！")},pe=()=>{h.logout(),localStorage.removeItem("auth"),T.push("/PomegranateShop")},ge=s=>{T.push({name:"DetailsPage",params:{id:s}})};let H=c([]),J=c([]);j(async()=>{var V,$;const s=Object.assign({"/src/assets/local_img/banner_img/1.jpg":()=>l(()=>import("./1-DIM5lpgz.js"),[]),"/src/assets/local_img/banner_img/10.jpg":()=>l(()=>import("./10-B--GmBzE.js"),[]),"/src/assets/local_img/banner_img/11.jpg":()=>l(()=>import("./11-D1qGV6sT.js"),[]),"/src/assets/local_img/banner_img/12.jpg":()=>l(()=>import("./12-Bq-GhX9D.js"),[]),"/src/assets/local_img/banner_img/13.jpg":()=>l(()=>import("./13-D1slJws7.js"),[]),"/src/assets/local_img/banner_img/14.jpg":()=>l(()=>import("./14-BY8khHLM.js"),[]),"/src/assets/local_img/banner_img/15.jpg":()=>l(()=>import("./15-BKiKflRi.js"),[]),"/src/assets/local_img/banner_img/2.jpg":()=>l(()=>import("./2-BMzJo885.js"),[]),"/src/assets/local_img/banner_img/3.jpg":()=>l(()=>import("./3-CzKn0deb.js"),[]),"/src/assets/local_img/banner_img/4.jpg":()=>l(()=>import("./4-B9D2_gkT.js"),[]),"/src/assets/local_img/banner_img/5.jpg":()=>l(()=>import("./5-BPubcs91.js"),[]),"/src/assets/local_img/banner_img/6.jpg":()=>l(()=>import("./6-BCt3gjKa.js"),[]),"/src/assets/local_img/banner_img/7.jpg":()=>l(()=>import("./7-D319X2pz.js"),[]),"/src/assets/local_img/banner_img/8.jpg":()=>l(()=>import("./8-3A0M4jW2.js"),[]),"/src/assets/local_img/banner_img/9.jpg":()=>l(()=>import("./9-BHB5IVfh.js"),[])}),t=Object.assign({"/src/assets/local_img/carousel_img/555.png":()=>l(()=>import("./555-CCrzk9-W.js"),[]),"/src/assets/local_img/carousel_img/Snipaste_2024-11-04_20-54-57.png":()=>l(()=>import("./Snipaste_2024-11-04_20-54-57-Dk6i4Iv6.js"),[]),"/src/assets/local_img/carousel_img/Snipaste_2025-03-26_02-20-33.png":()=>l(()=>import("./Snipaste_2025-03-26_02-20-33-BxOUKvO3.js"),[]),"/src/assets/local_img/carousel_img/Snipaste_2025-03-27_18-55-00.png":()=>l(()=>import("./Snipaste_2025-03-27_18-55-00-a0lFflCr.js"),[]),"/src/assets/local_img/carousel_img/Snipaste_2025-03-27_18-56-22.png":()=>l(()=>import("./Snipaste_2025-03-27_18-56-22-D2-MJvE2.js"),[]),"/src/assets/local_img/carousel_img/f75a68709c8b56001701f836da5f22a.jpg":()=>l(()=>import("./f75a68709c8b56001701f836da5f22a-CZkZbsWJ.js"),[]),"/src/assets/local_img/carousel_img/img1.jpeg":()=>l(()=>import("./img1-CKs-CIpZ.js"),[]),"/src/assets/local_img/carousel_img/register.jpg":()=>l(()=>import("./register-BdPGL16k.js"),[])}),d=await Promise.all(Object.keys(s).map(async(i,E)=>({url:(await s[i]()).default,alt:`轮播图 ${E+1}`,index:E+1}))),f=await Promise.all(Object.keys(t).map(async(i,E)=>({url:(await t[i]()).default,alt:`轮播图 ${E+1}`,index:E+1}))),k=[];for(let i=0;i<d.length;i+=2)k.push({url:[(V=d[i])==null?void 0:V.url,($=d[i+1])==null?void 0:$.url].filter(Boolean),alt:[`${d[i].alt}-1`,d[i+1]?`${d[i+1].alt}-2`:""].filter(Boolean)});H.value=k,J.value=f});const _=c("石榴品种"),A=c([]),q=c([]),y=s=>{_.value=s,Q(),Y(),_e(()=>{const t=document.getElementById("production-list");t&&t.scrollIntoView({behavior:"smooth",block:"start"})})},Q=()=>{q.value=A.value.filter(s=>s.type===_.value)},Y=()=>{localStorage.setItem("currentCategory",_.value),localStorage.setItem("productsData",JSON.stringify(A.value))},fe=()=>{const s=localStorage.getItem("currentCategory"),t=localStorage.getItem("productsData");s&&(_.value=s),t&&(A.value=JSON.parse(t))};j(async()=>{fe();try{const s=await Ve({method:"get",url:"/api/productions"});s.success&&(A.value=s.productions,Q(),Y())}catch(s){console.error("商品加载失败:",s),$e.error("商品信息加载失败，请稍后重试"),T.push("/404")}finally{me.value=!1}}),ie(q,s=>{s.length>0&&_e(()=>{const t=document.querySelectorAll(".card"),d=document.querySelector(".grid_container"),f=document.querySelector(".pointer");f.style.display="none",f.style.transition="0.2s all cubic-bezier(0.4, 0, 0.2, 1)",d.addEventListener("mouseenter",()=>f.style.display="none"),t.forEach(k=>{k.addEventListener("mouseenter",he),d.addEventListener("mouseleave",()=>{f.style.display="none"})})})});const he=s=>{const t=document.querySelector(".pointer");t.style.display="block",t.style.setProperty("--w",`${s.target.offsetWidth}px`),t.style.setProperty("--h",`${s.target.offsetHeight}px`),t.style.setProperty("--x",`${s.target.offsetLeft}px`),t.style.setProperty("--y",`${s.target.offsetTop}px`)},G=c(!1);j(()=>{window.addEventListener("scroll",K)}),be(()=>{window.removeEventListener("scroll",K)});const K=()=>{G.value=window.scrollY>500},ye=()=>{window.scrollTo({top:0,behavior:"smooth"})},g=c({groupIndex:-1,imgIndex:-1}),n=c(null),b=c(1.5),X=s=>{n.value&&(s.preventDefault(),b.value=Math.min(Math.max(b.value+(s.deltaY>0?-.1:.1),.3),1.5))};ie(n,s=>{s?(b.value=.5,window.addEventListener("wheel",X,{passive:!1})):window.removeEventListener("wheel",X)});const Z=re(()=>({transform:`translate(-50%, -50%) scale(${b.value})`,cursor:b.value>1?"zoom-out":"zoom-in"})),w=c(!1),O=c(!1),Ee=c([{path:"石榴品种",text:"品种"},{path:"石榴鲜食",text:"鲜食"},{path:"石榴饮品",text:"饮品"},{path:"石榴食用加工品",text:"食用加工品"},{path:"石榴保健加工品",text:"保健加工品"},{path:"石榴药用加工品",text:"药用加工品"}]);j(()=>{const s=()=>{O.value=window.innerWidth<768};s(),window.addEventListener("resize",s)});const Ie=s=>{w.value=!1,y(s)};return(s,t)=>{const d=Pe,f=F("router-link"),k=Oe,V=Ae,$=F("DArrowRight"),i=Se,E=F("ArrowUpBold");return r(),u(D,null,[e("div",Re,[t[15]||(t[15]=e("div",{class:"logo"},[e("img",{alt:"pomegranate_logo",src:De,height:"50px"})],-1)),O.value?(r(),u("div",{key:0,class:"mobile-menu-btn",onClick:t[0]||(t[0]=o=>w.value=!w.value)},[m(d,{size:24},{default:v(()=>[(r(),ue(xe(w.value?"CircleClose":"Menu")))]),_:1})])):M("",!0),m(ce,{name:"slide-down"},{default:v(()=>[N(e("div",je,[(r(!0),u(D,null,z(Ee.value,(o,a)=>(r(),u("a",{key:a,onClick:R=>Ie(o.path),class:p({selected:_.value===o.path})},C(o.text),11,Me))),128))],512),[[U,O.value&&w.value]])]),_:1}),O.value?M("",!0):(r(),u("div",ze,[e("ul",null,[e("li",null,[e("a",{href:"#production-list",onClick:t[1]||(t[1]=I(o=>y("石榴品种"),["prevent"])),class:p({selected:_.value==="石榴品种"})},"品种",2)]),e("li",null,[e("a",{href:"#production-list",onClick:t[2]||(t[2]=I(o=>y("石榴鲜食"),["prevent"])),class:p({selected:_.value==="石榴鲜食"})},"鲜食",2)]),e("li",null,[e("a",{href:"#production-list",onClick:t[3]||(t[3]=I(o=>y("石榴饮品"),["prevent"])),class:p({selected:_.value==="石榴饮品"})},"饮品",2)]),e("li",null,[e("a",{href:"#production-list",onClick:t[4]||(t[4]=I(o=>y("石榴食用加工品"),["prevent"])),class:p({selected:_.value==="石榴食用加工品"})},"食用加工品",2)]),e("li",null,[e("a",{href:"#production-list",onClick:t[5]||(t[5]=I(o=>y("石榴保健加工品"),["prevent"])),class:p({selected:_.value==="石榴保健加工品"})},"保健加工品",2)]),e("li",null,[e("a",{href:"#production-list",onClick:t[6]||(t[6]=I(o=>y("石榴药用加工品"),["prevent"])),class:p({selected:_.value==="石榴药用加工品"})},"药用加工品",2)])])])),e("div",{class:"user-container",onMouseenter:t[7]||(t[7]=o=>B.value=!0),onMouseleave:t[8]||(t[8]=o=>B.value=!1)},[S(h).isLoggedIn?(r(),u("div",Be,[e("img",{src:S(h).userInfo.avatar,alt:"头像",class:"avatar"},null,8,qe),e("span",null,C(S(h).userInfo.phone),1),m(ce,{name:"fade"},{default:v(()=>[N(e("div",Ne,[e("div",{class:"menu-item",onClick:pe},t[12]||(t[12]=[e("span",null,"退出登录",-1)])),W.value?(r(),u("div",{key:0,class:"menu-item",onClick:ve},t[13]||(t[13]=[e("span",null,"后台管理",-1)]))):M("",!0)],512),[[U,B.value]])]),_:1})])):(r(),u("div",Ue,[m(f,{to:{path:"/Login",query:{redirect:s.$route.fullPath}}},{default:v(()=>t[14]||(t[14]=[e("i",{title:"登录",class:"iconfont icon-denglu-yonghu"},null,-1)])),_:1},8,["to"])]))],32)]),e("div",Fe,[(r(!0),u(D,null,z(S(H),(o,a)=>{var R,ee,te,se,oe,le,ae,ne;return r(),u("div",{class:"banner_content",key:a},[e("img",{src:o.url[0],class:p({"hover-zoom":g.value.groupIndex===a&&g.value.imgIndex===0,expanded:((R=n.value)==null?void 0:R.groupIndex)===a&&((ee=n.value)==null?void 0:ee.imgIndex)===0}),onClick:x=>{var L,P;return n.value=((L=n.value)==null?void 0:L.groupIndex)===a&&((P=n.value)==null?void 0:P.imgIndex)===0?null:{groupIndex:a,imgIndex:0}},onMouseenter:x=>g.value={groupIndex:a,imgIndex:0},onMouseleave:t[9]||(t[9]=x=>g.value={groupIndex:-1,imgIndex:-1}),style:de(((te=n.value)==null?void 0:te.groupIndex)===a&&((se=n.value)==null?void 0:se.imgIndex)===0?Z.value:{})},null,46,We),e("img",{src:o.url[1],class:p({"hover-zoom":g.value.groupIndex===a&&g.value.imgIndex===1,expanded:((oe=n.value)==null?void 0:oe.groupIndex)===a&&((le=n.value)==null?void 0:le.imgIndex)===1}),onClick:x=>{var L,P;return n.value=((L=n.value)==null?void 0:L.groupIndex)===a&&((P=n.value)==null?void 0:P.imgIndex)===1?null:{groupIndex:a,imgIndex:1}},onMouseenter:x=>g.value={groupIndex:a,imgIndex:1},onMouseleave:t[10]||(t[10]=x=>g.value={groupIndex:-1,imgIndex:-1}),style:de(((ae=n.value)==null?void 0:ae.groupIndex)===a&&((ne=n.value)==null?void 0:ne.imgIndex)===1?Z.value:{})},null,46,He)])}),128)),n.value?(r(),u("div",{key:0,class:"zoom-overlay",onClick:t[11]||(t[11]=I(o=>n.value=null,["self"]))})):M("",!0)]),e("div",Je,[t[18]||(t[18]=e("h1",null,"欢迎来到蒙自市石榴旗舰店",-1)),e("div",Qe,[m(V,{interval:4e3,type:"card",height:"400px"},{default:v(()=>[(r(!0),u(D,null,z(S(J),(o,a)=>(r(),ue(k,{key:a},{default:v(()=>[e("img",{src:o.url,alt:o.alt,style:{width:"100%",height:"100%","object-fit":"cover"}},null,8,Ye)]),_:2},1024))),128))]),_:1})]),e("h2",Ge,C(_.value),1),e("div",Ke,[t[17]||(t[17]=e("div",{class:"pointer"},null,-1)),(r(!0),u(D,null,z(q.value,(o,a)=>(r(),u("div",{class:"card",key:a},[e("h2",null,C(o.name),1),e("img",{src:o.image,alt:o.name},null,8,Xe),e("p",null,C(o.description),1),e("div",Ze,[e("span",et,"¥"+C(o.price),1)]),m(i,{type:"success",onClick:R=>ge(o.id)},{default:v(()=>[t[16]||(t[16]=Le("去购买")),m(d,null,{default:v(()=>[m($)]),_:1})]),_:2},1032,["onClick"])]))),128))])]),t[19]||(t[19]=e("footer",{class:"site-footer",role:"contentinfo"},[e("div",{class:"footer-container"},[e("div",{class:"footer-section"},[e("div",{class:"brand-info"},[e("h3",{class:"footer-title"},"红河州蒙自市石榴旗舰店"),e("div",{class:"copyright"},[e("p",null,"© 2021-2025 石榴品牌旗舰店"),e("p",null,"云、滇-红河州-蒙自市-532503-661100"),e("img",{src:Te,title:"工商认证标识",alt:"工商认证标识",class:"certification"})])])]),e("div",{class:"footer-section"},[e("h3",{class:"footer-title"},"客户服务"),e("ul",{class:"link-list"},[e("li",null,[e("a",{href:"/CustomerService"},"常见问题")]),e("li",null,[e("a",{href:"/CustomerService"},"配送政策")]),e("li",null,[e("a",{href:"/CustomerService"},"退换货指南")]),e("li",null,[e("a",{href:"/CustomerService"},"订单查询")])])]),e("div",{class:"footer-section"},[e("h3",{class:"footer-title"},"法律条款"),e("ul",{class:"link-list"},[e("li",null,[e("a",{href:"/CustomerService"},"隐私政策")]),e("li",null,[e("a",{href:"/CustomerService"},"服务协议")]),e("li",null,[e("a",{href:"/CustomerService"},"免责声明")]),e("li",null,[e("a",{href:"/CustomerService"},"网站地图")])])]),e("div",{class:"footer-section"},[e("h3",{class:"footer-title"},"关注我们"),e("div",{class:"contact-info"},[e("p",null,"客服热线:0873-114"),e("p",null,"服务时间:9:00-21:00"),e("p",null,"邮箱:3283089140@qq.com")]),e("div",{class:"social-media"},[e("a",{href:"#",class:"social-icon wechat",title:"微信公众号"}),e("a",{href:"#",class:"social-icon qq",title:"QQ群"}),e("a",{href:"#",class:"social-icon douyin",title:"抖音账号"}),e("a",{href:"#",class:"social-icon weibo",title:"官方微博"})])])])],-1)),N(m(i,{class:"back-to-top",circle:"",onClick:ye,text:"",title:"回到顶部"},{default:v(()=>[m(d,null,{default:v(()=>[m(E)]),_:1})]),_:1},512),[[U,G.value]])],64)}}},ft=ke(tt,[["__scopeId","data-v-271f963b"]]);export{ft as default};
