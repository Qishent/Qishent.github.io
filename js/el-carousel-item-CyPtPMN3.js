import{C as he,D as pe,E as Pe,r as C,c as H,f as e,s as W,o as ge,x as Ve,G as ze,H as De,I as ye,J as Z,j as $,a as D,k as ce,w as Q,m as Y,b as O,z as P,y as J,d as X,K as Re,v as q,T as ve,e as K,L as Ge,M as Ce,A as Ie,F as Fe,g as Ke,t as Ue,N as je,O as We,P as Je}from"./index-D3JvHN-W.js";import{b as _e,i as Xe,u as we,E as fe,_ as be,a as Ye,w as qe,c as Qe}from"./base-COint-0-.js";import{u as Ze}from"./index-DIeYr67b.js";import{f as Se}from"./vnode-Dt7CZ6xF.js";import{C as xe}from"./event-BB_Ol6Sd.js";import{t as de}from"./throttle-CvgtMyWL.js";import{u as et}from"./use-global-config-CDcpUNXh.js";const tt=_e({initialIndex:{type:Number,default:0},height:{type:String,default:""},trigger:{type:String,values:["hover","click"],default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:{type:String,values:["","none","outside"],default:""},arrow:{type:String,values:["always","hover","never"],default:"hover"},type:{type:String,values:["","card"],default:""},cardScale:{type:Number,default:.83},loop:{type:Boolean,default:!0},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},pauseOnHover:{type:Boolean,default:!0},motionBlur:Boolean}),at={change:(a,r)=>[a,r].every(Xe)},Te=Symbol("carouselContextKey"),se="ElCarouselItem",ot=(a,r,v)=>Se(a.subTree).filter(l=>{var f;return pe(l)&&((f=l.type)==null?void 0:f.name)===r&&!!l.component}).map(l=>l.component.uid).map(l=>v[l]).filter(l=>!!l),st=(a,r)=>{const v={},o=he([]);return{children:o,addChild:f=>{v[f.uid]=f,o.value=ot(a,r,v)},removeChild:f=>{delete v[f],o.value=o.value.filter(s=>s.uid!==f)}}},me=300,nt=(a,r,v)=>{const{children:o,addChild:T,removeChild:l}=st(ye(),se),f=Pe(),s=C(-1),I=C(null),b=C(!1),m=C(),E=C(0),w=C(!0),h=C(!0),_=C(!1),R=H(()=>a.arrow!=="never"&&!e(k)),V=H(()=>o.value.some(t=>t.props.label.toString().length>0)),B=H(()=>a.type==="card"),k=H(()=>a.direction==="vertical"),n=H(()=>a.height!=="auto"?{height:a.height}:{height:`${E.value}px`,overflow:"hidden"}),i=de(t=>{N(t)},me,{trailing:!0}),p=de(t=>{z(t)},me),g=t=>w.value?s.value<=1?t<=1:t>1:!0;function y(){I.value&&(clearInterval(I.value),I.value=null)}function M(){a.interval<=0||!a.autoplay||I.value||(I.value=setInterval(()=>S(),a.interval))}const S=()=>{h.value||(_.value=!0),h.value=!1,s.value<o.value.length-1?s.value=s.value+1:a.loop?s.value=0:_.value=!1};function N(t){if(h.value||(_.value=!0),h.value=!1,De(t)){const L=o.value.filter(F=>F.props.name===t);L.length>0&&(t=o.value.indexOf(L[0]))}if(t=Number(t),Number.isNaN(t)||t!==Math.floor(t))return;const c=o.value.length,A=s.value;t<0?s.value=a.loop?c-1:0:t>=c?s.value=a.loop?0:c-1:s.value=t,A===s.value&&u(A),le()}function u(t){o.value.forEach((c,A)=>{c.translateItem(A,s.value,t)})}function U(t,c){var A,L,F,re;const j=e(o),ie=j.length;if(ie===0||!t.states.inStage)return!1;const Be=c+1,Ae=c-1,ue=ie-1,$e=j[ue].states.active,He=j[0].states.active,Le=(L=(A=j[Be])==null?void 0:A.states)==null?void 0:L.active,Oe=(re=(F=j[Ae])==null?void 0:F.states)==null?void 0:re.active;return c===ue&&He||Le?"left":c===0&&$e||Oe?"right":!1}function x(){b.value=!0,a.pauseOnHover&&y()}function ee(){b.value=!1,M()}function te(){_.value=!1}function d(t){e(k)||o.value.forEach((c,A)=>{t===U(c,A)&&(c.states.hover=!0)})}function ne(){e(k)||o.value.forEach(t=>{t.states.hover=!1})}function G(t){t!==s.value&&(h.value||(_.value=!0)),s.value=t}function z(t){a.trigger==="hover"&&t!==s.value&&(s.value=t,h.value||(_.value=!0))}function ae(){N(s.value-1)}function ke(){N(s.value+1)}function le(){y(),a.pauseOnHover||M()}function Me(t){a.height==="auto"&&(E.value=t)}function Ne(){var t;const c=(t=f.default)==null?void 0:t.call(f);if(!c)return null;const L=Se(c).filter(F=>pe(F)&&F.type.name===se);return(L==null?void 0:L.length)===2&&a.loop&&!B.value?(w.value=!0,L):(w.value=!1,null)}W(()=>s.value,(t,c)=>{u(c),w.value&&(t=t%2,c=c%2),c>-1&&r(xe,t,c)}),W(()=>a.autoplay,t=>{t?M():y()}),W(()=>a.loop,()=>{N(s.value)}),W(()=>a.interval,()=>{le()});const oe=he();return ge(()=>{W(()=>o.value,()=>{o.value.length>0&&N(a.initialIndex)},{immediate:!0}),oe.value=Ze(m.value,()=>{u()}),M()}),Ve(()=>{y(),m.value&&oe.value&&oe.value.stop()}),ze(Te,{root:m,isCardType:B,isVertical:k,items:o,loop:a.loop,cardScale:a.cardScale,addItem:T,removeItem:l,setActiveItem:N,setContainerHeight:Me}),{root:m,activeIndex:s,arrowDisplay:R,hasLabel:V,hover:b,isCardType:B,isTransitioning:_,items:o,isVertical:k,containerStyle:n,isItemsTwoLength:w,handleButtonEnter:d,handleTransitionEnd:te,handleButtonLeave:ne,handleIndicatorClick:G,handleMouseEnter:x,handleMouseLeave:ee,setActiveItem:N,prev:ae,next:ke,PlaceholderItem:Ne,isTwoLengthShow:g,throttledArrowClick:i,throttledIndicatorHover:p}},lt="ElCarousel",rt=Z({name:lt}),it=Z({...rt,props:tt,emits:at,setup(a,{expose:r,emit:v}){const o=a,{root:T,activeIndex:l,arrowDisplay:f,hasLabel:s,hover:I,isCardType:b,items:m,isVertical:E,containerStyle:w,handleButtonEnter:h,handleButtonLeave:_,isTransitioning:R,handleIndicatorClick:V,handleMouseEnter:B,handleMouseLeave:k,handleTransitionEnd:n,setActiveItem:i,prev:p,next:g,PlaceholderItem:y,isTwoLengthShow:M,throttledArrowClick:S,throttledIndicatorHover:N}=nt(o,v),u=we("carousel"),{t:U}=et(),x=H(()=>{const d=[u.b(),u.m(o.direction)];return e(b)&&d.push(u.m("card")),d}),ee=H(()=>{const d=[u.e("container")];return o.motionBlur&&e(R)&&m.value.length>1&&d.push(e(E)?`${u.namespace.value}-transitioning-vertical`:`${u.namespace.value}-transitioning`),d}),te=H(()=>{const d=[u.e("indicators"),u.em("indicators",o.direction)];return e(s)&&d.push(u.em("indicators","labels")),o.indicatorPosition==="outside"&&d.push(u.em("indicators","outside")),e(E)&&d.push(u.em("indicators","right")),d});return r({activeIndex:l,setActiveItem:i,prev:p,next:g}),(d,ne)=>($(),D("div",{ref_key:"root",ref:T,class:P(e(x)),onMouseenter:J(e(B),["stop"]),onMouseleave:J(e(k),["stop"])},[e(f)?($(),ce(ve,{key:0,name:"carousel-arrow-left",persisted:""},{default:Q(()=>[Y(O("button",{type:"button",class:P([e(u).e("arrow"),e(u).em("arrow","left")]),"aria-label":e(U)("el.carousel.leftArrow"),onMouseenter:G=>e(h)("left"),onMouseleave:e(_),onClick:J(G=>e(S)(e(l)-1),["stop"])},[X(e(fe),null,{default:Q(()=>[X(e(Re))]),_:1})],42,["aria-label","onMouseenter","onMouseleave","onClick"]),[[q,(d.arrow==="always"||e(I))&&(o.loop||e(l)>0)]])]),_:1})):K("v-if",!0),e(f)?($(),ce(ve,{key:1,name:"carousel-arrow-right",persisted:""},{default:Q(()=>[Y(O("button",{type:"button",class:P([e(u).e("arrow"),e(u).em("arrow","right")]),"aria-label":e(U)("el.carousel.rightArrow"),onMouseenter:G=>e(h)("right"),onMouseleave:e(_),onClick:J(G=>e(S)(e(l)+1),["stop"])},[X(e(fe),null,{default:Q(()=>[X(e(Ge))]),_:1})],42,["aria-label","onMouseenter","onMouseleave","onClick"]),[[q,(d.arrow==="always"||e(I))&&(o.loop||e(l)<e(m).length-1)]])]),_:1})):K("v-if",!0),O("div",{class:P(e(ee)),style:Ie(e(w)),onTransitionend:e(n)},[X(e(y)),Ce(d.$slots,"default")],46,["onTransitionend"]),d.indicatorPosition!=="none"?($(),D("ul",{key:2,class:P(e(te))},[($(!0),D(Fe,null,Ke(e(m),(G,z)=>Y(($(),D("li",{key:z,class:P([e(u).e("indicator"),e(u).em("indicator",d.direction),e(u).is("active",z===e(l))]),onMouseenter:ae=>e(N)(z),onClick:J(ae=>e(V)(z),["stop"])},[O("button",{class:P(e(u).e("button")),"aria-label":e(U)("el.carousel.indicator",{index:z+1})},[e(s)?($(),D("span",{key:0},Ue(G.props.label),1)):K("v-if",!0)],10,["aria-label"])],42,["onMouseenter","onClick"])),[[q,e(M)(z)]])),128))],2)):K("v-if",!0),o.motionBlur?($(),D("svg",{key:3,xmlns:"http://www.w3.org/2000/svg",version:"1.1",style:{display:"none"}},[O("defs",null,[O("filter",{id:"elCarouselHorizontal"},[O("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"12,0"})]),O("filter",{id:"elCarouselVertical"},[O("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"0,10"})])])])):K("v-if",!0)],42,["onMouseenter","onMouseleave"]))}});var ut=be(it,[["__file","carousel.vue"]]);const ct=_e({name:{type:String,default:""},label:{type:[String,Number],default:""}}),vt=a=>{const r=je(Te),v=ye(),o=C(),T=C(!1),l=C(0),f=C(1),s=C(!1),I=C(!1),b=C(!1),m=C(!1),{isCardType:E,isVertical:w,cardScale:h}=r;function _(n,i,p){const g=p-1,y=i-1,M=i+1,S=p/2;return i===0&&n===g?-1:i===g&&n===0?p:n<y&&i-n>=S?p+1:n>M&&n-i>=S?-2:n}function R(n,i){var p,g;const y=e(w)?((p=r.root.value)==null?void 0:p.offsetHeight)||0:((g=r.root.value)==null?void 0:g.offsetWidth)||0;return b.value?y*((2-h)*(n-i)+1)/4:n<i?-(1+h)*y/4:(3+h)*y/4}function V(n,i,p){const g=r.root.value;return g?((p?g.offsetHeight:g.offsetWidth)||0)*(n-i):0}const B=(n,i,p)=>{var g;const y=e(E),M=(g=r.items.value.length)!=null?g:Number.NaN,S=n===i;!y&&!Ye(p)&&(m.value=S||n===p),!S&&M>2&&r.loop&&(n=_(n,i,M));const N=e(w);s.value=S,y?(b.value=Math.round(Math.abs(n-i))<=1,l.value=R(n,i),f.value=e(s)?1:h):l.value=V(n,i,N),I.value=!0,S&&o.value&&r.setContainerHeight(o.value.offsetHeight)};function k(){if(r&&e(E)){const n=r.items.value.findIndex(({uid:i})=>i===v.uid);r.setActiveItem(n)}}return ge(()=>{r.addItem({props:a,states:We({hover:T,translate:l,scale:f,active:s,ready:I,inStage:b,animating:m}),uid:v.uid,translateItem:B})}),Je(()=>{r.removeItem(v.uid)}),{carouselItemRef:o,active:s,animating:m,hover:T,inStage:b,isVertical:w,translate:l,isCardType:E,scale:f,ready:I,handleItemClick:k}},ft=Z({name:se}),dt=Z({...ft,props:ct,setup(a){const r=a,v=we("carousel"),{carouselItemRef:o,active:T,animating:l,hover:f,inStage:s,isVertical:I,translate:b,isCardType:m,scale:E,ready:w,handleItemClick:h}=vt(r),_=H(()=>[v.e("item"),v.is("active",T.value),v.is("in-stage",s.value),v.is("hover",f.value),v.is("animating",l.value),{[v.em("item","card")]:m.value,[v.em("item","card-vertical")]:m.value&&I.value}]),R=H(()=>{const B=`${`translate${e(I)?"Y":"X"}`}(${e(b)}px)`,k=`scale(${e(E)})`;return{transform:[B,k].join(" ")}});return(V,B)=>Y(($(),D("div",{ref_key:"carouselItemRef",ref:o,class:P(e(_)),style:Ie(e(R)),onClick:e(h)},[e(m)?Y(($(),D("div",{key:0,class:P(e(v).e("mask"))},null,2)),[[q,!e(T)]]):K("v-if",!0),Ce(V.$slots,"default")],14,["onClick"])),[[q,e(w)]])}});var Ee=be(dt,[["__file","carousel-item.vue"]]);const _t=qe(ut,{CarouselItem:Ee}),wt=Qe(Ee);export{_t as E,wt as a};
