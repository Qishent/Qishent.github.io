import{E as N}from"./base-BRrwqkEg.js";import{E as D,a as P}from"./el-table-column-CqdFGitN.js";import{E as y}from"./el-overlay-B5Q1yc8L.js";import{E as F}from"./el-input-number-WyODoFJW.js";/* empty css               */import{E as L}from"./el-button-w8vQtEkU.js";import{u as z}from"./cartStore-BrIJIP-9.js";import{_ as A,c as f,a as d,b as e,d as o,w as l,t as a,k as p,g as _,F as M,h as Q,e as R,q as U,p as $,j}from"./index-BWPHe3CG.js";import{E as O}from"./el-message-DSEjY1Pv.js";import"./index-uMH3zwTA.js";import"./error-Cq9Fpw4b.js";import"./index-Ci2nZ6dO.js";import"./aria-Dcom87Zv.js";import"./focus-trap-DX4vIPMs.js";import"./index-DDfDEYP9.js";import"./use-form-common-props-DbweM7ee.js";import"./use-global-config-Bdzg8_5z.js";import"./debounce-BnmRmBUx.js";import"./event-BB_Ol6Sd.js";import"./vnode-DudMcPSu.js";const G={class:"cart-container"},H={class:"cart-header"},J={class:"production-info"},K=["src"],W={class:"production-details"},X={class:"unit-price"},Y={key:0,class:"production-specs"},Z={class:"spec-item"},w={class:"cart-summary"},tt={class:"total-info"},et={class:"total-price"},ot={__name:"ShoppingCart",setup(at){const c=z(),C=U(),g=$(),b=()=>{var s;const n=((s=C.meta)==null?void 0:s.from)||"/PomegranateShop";g.push(n)},r=f(()=>c.items),h=f(()=>{const n=new Set;return r.value.forEach(s=>n.add(s.name)),n.size}),E=f(()=>c.totalPrice),x=n=>{c.updateQuantity(n.id,n.quantity),O.success("数量已更新")},k=n=>{y.confirm("确定要删除该商品吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{c.removeItem(n)})},B=()=>{y.confirm("确定要清空购物车吗？","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then(()=>{c.clearCart()})},V=()=>{g.push("/CheckOut")};return(n,s)=>{const q=j("DArrowLeft"),I=N,u=L,m=P,S=F,T=D;return p(),d("div",G,[e("div",H,[o(u,{type:"info",onClick:b},{default:l(()=>[o(I,null,{default:l(()=>[o(q)]),_:1}),s[0]||(s[0]=_("退出"))]),_:1}),e("h2",null,"我的购物车（"+a(h.value)+"件）",1),o(u,{type:"danger",disabled:!r.value.length,onClick:B},{default:l(()=>s[1]||(s[1]=[_(" 清空购物车 ")])),_:1},8,["disabled"])]),o(T,{data:r.value,"empty-text":"购物车空空如也，快去挑选商品吧～"},{default:l(()=>[o(m,{label:"商品信息",width:"400"},{default:l(({row:t})=>[e("div",J,[e("img",{src:t.image,class:"production-image"},null,8,K),e("div",W,[e("h4",null,a(t.name),1),e("p",X,"单价：¥"+a(t.price)+"元"+a(t.unit),1),t.specs?(p(),d("div",Y,[e("span",Z,"已选数量: "+a(t.quantity)+a(t.unit),1),(p(!0),d(M,null,Q(t.specs,(i,v)=>(p(),d("span",{key:v,class:"spec-item"},a(v)+": "+a(i),1))),128))])):R("",!0)])])]),_:1}),o(m,{label:"数量",width:"180","header-align":"center",alignments:"center"},{default:l(({row:t})=>[o(S,{modelValue:t.quantity,"onUpdate:modelValue":i=>t.quantity=i,min:1,max:t.stock,onChange:i=>x(t)},null,8,["modelValue","onUpdate:modelValue","max","onChange"])]),_:1}),o(m,{label:"小计",width:"120","header-align":"center",align:"center"},{default:l(({row:t})=>[_(" ¥"+a((t.price*t.quantity).toFixed(2)),1)]),_:1}),o(m,{label:"操作",width:"100","header-align":"center",align:"center"},{default:l(({row:t})=>[o(u,{type:"danger",onClick:i=>k(t.id),icon:"Delete",circle:""},null,8,["onClick"])]),_:1})]),_:1},8,["data"]),e("div",w,[e("div",tt,[e("p",null,"共 "+a(h.value)+" 件商品",1),e("p",et,"总计：¥"+a(E.value),1)]),o(u,{type:"primary",size:"large",disabled:!r.value.length,onClick:V},{default:l(()=>[_(" 去结算（"+a(h.value)+"件） ",1)]),_:1},8,["disabled"])])])}}},kt=A(ot,[["__scopeId","data-v-4f2e90fe"]]);export{kt as default};
