import{_ as W,u as G,r as _,c as K,o as O,a as i,b as e,d as a,w as u,e as C,T as x,f as h,t as p,g,F as E,h as P,i as d,j as L,k as l,l as R,m as X,n as T,v as V,p as Y,q as Z}from"./index-BAA_AMh7.js";import{E as ee}from"./base-4kfo36zp.js";import{E as te}from"./el-button-D-d28LUf.js";import{_ as se,a as oe,E as re,b as le}from"./certification-qGIquP3-.js";import{u as ne}from"./adminStore-B6m40LsA.js";import{u as ae}from"./productionStore-B9We-Mfy.js";import{u as ie}from"./errorStor-C-exLHSN.js";import{r as ue}from"./request-BxsLXbCj.js";import{E as M}from"./el-message-WK0GHmtc.js";import"./use-global-config-DbqVAiVU.js";import"./use-form-common-props-DJLLsWu1.js";import"./index-DZzn_qGS.js";import"./vnode-DAy1GmR4.js";import"./event-BB_Ol6Sd.js";import"./throttle-BBgyUfwG.js";import"./debounce-WDEw_8oo.js";import"./aria-Dcom87Zv.js";const ce={class:"header"},de={class:"mobile-nav"},me=["onClick"],_e={key:1,class:"nav desktop-nav"},pe={key:0,class:"user-info"},ge=["src"],fe={class:"logout-menu"},ve={key:1,class:"login"},he={class:"main"},ke={class:"background_img"},be=["src","alt"],Ee={class:"banner"},ye={class:"grid_container"},Se=["src","alt"],Ce={style:{"margin-top":"10px"}},Pe={style:{color:"red"}},Ae={style:{"margin-top":"10px"}},Ie={__name:"Home",setup(we){const f=Y(),j=Z(),m=G(),N=ne(),q=ae(),$=ie(),y=_(!1);m.initialize();const A=K(()=>{var t;const s=JSON.parse(localStorage.getItem("users"));if(s){const o=s.find(n=>n.phone===m.userInfo.phone);return o==null?void 0:o.isAdmin}return m.userInfo.isAdmin||((t=m.userInfo.roles)==null?void 0:t.includes("admin"))}),B=()=>{A.value&&f.push("/Admin")},H=()=>{m.logout(),localStorage.removeItem("auth"),f.push("/")},U=s=>{f.push({name:"DetailsPage",params:{id:s}})},S=_({});(async()=>{try{const s=await ue({method:"get",url:"/api/productions",timeout:1e4});if(s.success&&Array.isArray(s.productions)){const t=s.productions.reduce((o,n)=>{const c=n.type||"其他";return o[c]||(o[c]=[]),o[c].push(n),o},{});S.value=Object.entries(t).reduce((o,[n,c])=>(o[n]=c[Math.floor(Math.random()*c.length)],o),{}),N.totalProductions(s.productions.length),q.saveProductions(s.productions)}else console.error("响应数据格式错误:",s)}catch(s){console.error("完整错误详情：",s),s.code==="ECONNABORTED"?M.error("请求超时，请检查网络连接"):M.error(`数据获取失败：${s.message}`),$.setError(s.status,s.message),f.push("/Error")}return S.value})();let I=_([]);O(async()=>{const s=Object.assign({"/src/assets/local_img/background_img/16ac47829619b0c1d8e42d8eda084a84.png":()=>d(()=>import("./16ac47829619b0c1d8e42d8eda084a84-2XgwcZIO.js"),[]),"/src/assets/local_img/background_img/407fc59448d329788d26303cdaf10567.png":()=>d(()=>import("./407fc59448d329788d26303cdaf10567-CIrCx3Ne.js"),[]),"/src/assets/local_img/background_img/4b5a00e2beed0adf1b88a63e0e6d83b9.png":()=>d(()=>import("./4b5a00e2beed0adf1b88a63e0e6d83b9-DOz4gqX_.js"),[]),"/src/assets/local_img/background_img/976e02e23650ef3f3f228755588b7910.png":()=>d(()=>import("./976e02e23650ef3f3f228755588b7910-DeIdRYKa.js"),[]),"/src/assets/local_img/background_img/Snipaste_2025-03-27_18-55-00.png":()=>d(()=>import("./Snipaste_2025-03-27_18-55-00-a0lFflCr.js"),[]),"/src/assets/local_img/background_img/background_img1.jpg":()=>d(()=>import("./background_img1-BnDMq5ei.js"),[]),"/src/assets/local_img/background_img/background_img3.jpg":()=>d(()=>import("./background_img3-LnWTQOqg.js"),[]),"/src/assets/local_img/background_img/ea2fbeb724c29d078347b602947860dd.png":()=>d(()=>import("./ea2fbeb724c29d078347b602947860dd-DYab9bf-.js"),[]),"/src/assets/local_img/background_img/register.jpg":()=>d(()=>import("./register-BdPGL16k.js"),[])}),t=await Promise.all(Object.keys(s).map(async(o,n)=>({url:(await s[o]()).default,alt:`背景图 ${n+1}`,index:n+1})));I.value=t});const v=_(!1),k=_(!1);O(()=>{const s=()=>{k.value=window.innerWidth<768};s(),window.addEventListener("resize",s)});const z=_([{path:"/Home",text:"首页"},{path:"/PomegranateShop",text:"石榴商城"},{path:"/PomegranateStory",text:"石榴故事"},{path:"/AboutUs",text:"关于我们"}]),F=s=>{v.value=!1,f.push(s)};return(s,t)=>{const o=ee,n=L("router-link"),c=le,Q=re,w=L("DArrowRight"),D=te;return l(),i(E,null,[e("div",ce,[t[7]||(t[7]=e("div",{class:"logo"},[e("img",{alt:"pomegranate_logo",src:se,width:"50px",height:"65px"}),e("strong",null,"蒙自石榴旗舰店")],-1)),k.value?(l(),i("div",{key:0,class:"mobile-menu-btn",onClick:t[0]||(t[0]=r=>v.value=!v.value)},[a(o,{size:24},{default:u(()=>[(l(),R(X(v.value?"CircleClose":"Menu")))]),_:1})])):C("",!0),a(x,{name:"slide-down"},{default:u(()=>[T(e("div",de,[(l(!0),i(E,null,P(z.value,(r,b)=>(l(),i("a",{key:b,onClick:J=>F(r.path)},p(r.text),9,me))),128))],512),[[V,k.value&&v.value]])]),_:1}),k.value?C("",!0):(l(),i("div",_e,t[3]||(t[3]=[e("a",{href:"/Home"},"首页",-1),e("a",{href:"/PomegranateShop",target:"_blank"},"石榴商城",-1),e("a",{href:"/PomegranateStory",target:"_blank"},"石榴故事",-1),e("a",{href:"/AboutUs",target:"_blank"},"关于我们",-1)]))),e("div",{class:"user-container",onMouseenter:t[1]||(t[1]=r=>y.value=!0),onMouseleave:t[2]||(t[2]=r=>y.value=!1)},[h(m).isLoggedIn?(l(),i("div",pe,[e("img",{src:h(m).userInfo.avatar,alt:"头像",class:"avatar"},null,8,ge),e("span",null,p(h(m).userInfo.phone),1),a(x,{name:"fade"},{default:u(()=>[T(e("div",fe,[e("div",{class:"menu-item",onClick:H},t[4]||(t[4]=[e("span",null,"退出登录",-1)])),A.value?(l(),i("div",{key:0,class:"menu-item",onClick:B},t[5]||(t[5]=[e("span",null,"后台管理",-1)]))):C("",!0)],512),[[V,y.value]])]),_:1})])):(l(),i("div",ve,[a(n,{to:{path:"/Login",query:{redirect:h(j).fullPath}}},{default:u(()=>t[6]||(t[6]=[e("i",{title:"登录",class:"iconfont icon-denglu-yonghu"},null,-1)])),_:1},8,["to"])]))],32)]),e("div",he,[e("div",ke,[t[8]||(t[8]=e("div",{class:"title"},[e("p",null,[e("span",null,"晶红"),g("满椟"),e("span",null,"霞光染，"),g("蜜露"),e("span",null,"凝珠"),e("span",null,"滇南秋")]),e("p",null,"——蒙自石榴，天地润养的甜糯诗篇!")],-1)),a(Q,{trigger:"click",height:"680px","motion-blur":"","interval:8000":""},{default:u(()=>[(l(!0),i(E,null,P(h(I),r=>(l(),R(c,{key:r},{default:u(()=>[e("img",{src:r.url,alt:r.alt,style:{width:"100%",height:"100%","object-fit":"cover"}},null,8,be)]),_:2},1024))),128))]),_:1})]),e("div",Ee,[t[13]||(t[13]=e("h1",null,"品类精选",-1)),e("div",ye,[(l(!0),i(E,null,P(S.value,(r,b)=>(l(),i("div",{class:"card",key:b},[e("h2",null,p(b)+"推荐",1),e("img",{src:r.image,alt:r.name},null,8,Se),e("h3",null,p(r.name),1),e("span",null,p(r.description),1),e("p",Ce,[t[9]||(t[9]=g(" 价格:")),e("span",Pe,"¥"+p(r.price.toFixed(2)),1),t[10]||(t[10]=g("元 "))]),e("div",Ae,[a(n,{to:"/PomegranateShop"},{default:u(()=>[a(D,{type:"primary",plain:"",round:""},{default:u(()=>[t[11]||(t[11]=g(" 了解更多")),a(o,null,{default:u(()=>[a(w)]),_:1})]),_:1})]),_:1}),a(D,{type:"success",onClick:J=>U(r.id),plain:"",round:""},{default:u(()=>[t[12]||(t[12]=g(" 立即购买")),a(o,null,{default:u(()=>[a(w)]),_:1})]),_:2},1032,["onClick"])])]))),128))])])]),t[14]||(t[14]=e("footer",{class:"site-footer",role:"contentinfo"},[e("div",{class:"footer-container"},[e("div",{class:"footer-section"},[e("div",{class:"brand-info"},[e("h3",{class:"footer-title"},"红河州蒙自市石榴旗舰店"),e("div",{class:"copyright"},[e("p",null,"© 2021-2025 石榴品牌旗舰店"),e("p",null,"云、滇-红河州-蒙自市-532503-661100"),e("img",{src:oe,title:"工商认证标识",alt:"工商认证标识",class:"certification"})])])]),e("div",{class:"footer-section"},[e("h3",{class:"footer-title"},"客户服务"),e("ul",{class:"link-list"},[e("li",null,[e("a",{href:"/CustomerService"},"常见问题")]),e("li",null,[e("a",{href:"/CustomerService"},"配送政策")]),e("li",null,[e("a",{href:"/CustomerService"},"退换货指南")]),e("li",null,[e("a",{href:"/CustomerService"},"订单查询")])])]),e("div",{class:"footer-section"},[e("h3",{class:"footer-title"},"法律条款"),e("ul",{class:"link-list"},[e("li",null,[e("a",{href:"/CustomerService"},"隐私政策")]),e("li",null,[e("a",{href:"/CustomerService"},"服务协议")]),e("li",null,[e("a",{href:"/CustomerService"},"免责声明")]),e("li",null,[e("a",{href:"/CustomerService"},"网站地图")])])]),e("div",{class:"footer-section"},[e("h3",{class:"footer-title"},"关注我们"),e("div",{class:"contact-info"},[e("p",null,"客服热线:0873-114"),e("p",null,"服务时间:9:00-21:00"),e("p",null,"邮箱:3283089140@qq.com")]),e("div",{class:"social-media"},[e("a",{href:"#",class:"social-icon wechat",title:"微信公众号"}),e("a",{href:"#",class:"social-icon qq",title:"QQ群"}),e("a",{href:"#",class:"social-icon douyin",title:"抖音账号"}),e("a",{href:"#",class:"social-icon weibo",title:"官方微博"})])])])],-1))],64)}}},Je=W(Ie,[["__scopeId","data-v-32cf327a"]]);export{Je as default};
