import{E as ut}from"./base-BBuVGrsO.js";import{E as ct,v as lt}from"./el-pagination-UHV4tccM.js";import{E as dt}from"./el-card-CMdHyESG.js";import{a as ft,E as ht}from"./el-table-column-jxTLwcfl.js";/* empty css               */import"./el-select-DG_vSaAl.js";import{E as nt,a as pt}from"./el-overlay-BHX8Hbt_.js";import{E as mt}from"./el-button-D1eLmx3x.js";import{u as $t}from"./adminStore-BUizldsK.js";import{_ as gt,r as G,o as vt,c as st,a as yt,d as y,w as x,j as at,b as X,f as _t,ao as Mt,m as Dt,k as wt,n as tt,t as bt}from"./index-BbgOGWtc.js";import{r as it}from"./request-BkFvJOBV.js";import{E as Q}from"./el-message-D3QXA0wy.js";import"./use-global-config-BqmYTjt1.js";import"./aria-Dcom87Zv.js";import"./event-BB_Ol6Sd.js";import"./error-Cq9Fpw4b.js";import"./index-C6T8Vz6z.js";import"./index-q7t3ntxB.js";import"./focus-trap-D2ZXtg8m.js";import"./index-DqR8doS3.js";import"./use-form-common-props-CiI_iKAU.js";import"./debounce-00-5nJ5V.js";import"./index-CHQFl-w5.js";import"./token-DI9FKtlJ.js";import"./castArray-CBW6Ugda.js";import"./vnode-bwl3DZST.js";var St=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ot(b){return b&&b.__esModule&&Object.prototype.hasOwnProperty.call(b,"default")?b.default:b}var ot={exports:{}};(function(b,F){(function(T,E){b.exports=E()})(St,function(){var T=1e3,E=6e4,I=36e5,S="millisecond",O="second",D="minute",w="hour",M="day",L="week",g="month",l="quarter",u="year",_="date",C="Invalid Date",Y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,P=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,K={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(s){var r=["th","st","nd","rd"],t=s%100;return"["+s+(r[(t-20)%10]||r[t]||r[0])+"]"}},B=function(s,r,t){var n=String(s);return!n||n.length>=r?s:""+Array(r+1-n.length).join(t)+s},R={s:B,z:function(s){var r=-s.utcOffset(),t=Math.abs(r),n=Math.floor(t/60),e=t%60;return(r<=0?"+":"-")+B(n,2,"0")+":"+B(e,2,"0")},m:function s(r,t){if(r.date()<t.date())return-s(t,r);var n=12*(t.year()-r.year())+(t.month()-r.month()),e=r.clone().add(n,g),a=t-e<0,i=r.clone().add(n+(a?-1:1),g);return+(-(n+(t-e)/(a?e-i:i-e))||0)},a:function(s){return s<0?Math.ceil(s)||0:Math.floor(s)},p:function(s){return{M:g,y:u,w:L,d:M,D:_,h:w,m:D,s:O,ms:S,Q:l}[s]||String(s||"").toLowerCase().replace(/s$/,"")},u:function(s){return s===void 0}},j="en",p={};p[j]=K;var V="$isDayjsObject",W=function(s){return s instanceof Z||!(!s||!s[V])},J=function s(r,t,n){var e;if(!r)return j;if(typeof r=="string"){var a=r.toLowerCase();p[a]&&(e=a),t&&(p[a]=t,e=a);var i=r.split("-");if(!e&&i.length>1)return s(i[0])}else{var c=r.name;p[c]=r,e=c}return!n&&e&&(j=e),e||!n&&j},f=function(s,r){if(W(s))return s.clone();var t=typeof r=="object"?r:{};return t.date=s,t.args=arguments,new Z(t)},o=R;o.l=J,o.i=W,o.w=function(s,r){return f(s,{locale:r.$L,utc:r.$u,x:r.$x,$offset:r.$offset})};var Z=function(){function s(t){this.$L=J(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[V]=!0}var r=s.prototype;return r.parse=function(t){this.$d=function(n){var e=n.date,a=n.utc;if(e===null)return new Date(NaN);if(o.u(e))return new Date;if(e instanceof Date)return new Date(e);if(typeof e=="string"&&!/Z$/i.test(e)){var i=e.match(Y);if(i){var c=i[2]-1||0,d=(i[7]||"0").substring(0,3);return a?new Date(Date.UTC(i[1],c,i[3]||1,i[4]||0,i[5]||0,i[6]||0,d)):new Date(i[1],c,i[3]||1,i[4]||0,i[5]||0,i[6]||0,d)}}return new Date(e)}(t),this.init()},r.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},r.$utils=function(){return o},r.isValid=function(){return this.$d.toString()!==C},r.isSame=function(t,n){var e=f(t);return this.startOf(n)<=e&&e<=this.endOf(n)},r.isAfter=function(t,n){return f(t)<this.startOf(n)},r.isBefore=function(t,n){return this.endOf(n)<f(t)},r.$g=function(t,n,e){return o.u(t)?this[n]:this.set(e,t)},r.unix=function(){return Math.floor(this.valueOf()/1e3)},r.valueOf=function(){return this.$d.getTime()},r.startOf=function(t,n){var e=this,a=!!o.u(n)||n,i=o.p(t),c=function(H,$){var k=o.w(e.$u?Date.UTC(e.$y,$,H):new Date(e.$y,$,H),e);return a?k:k.endOf(M)},d=function(H,$){return o.w(e.toDate()[H].apply(e.toDate("s"),(a?[0,0,0,0]:[23,59,59,999]).slice($)),e)},h=this.$W,m=this.$M,v=this.$D,A="set"+(this.$u?"UTC":"");switch(i){case u:return a?c(1,0):c(31,11);case g:return a?c(1,m):c(0,m+1);case L:var U=this.$locale().weekStart||0,N=(h<U?h+7:h)-U;return c(a?v-N:v+(6-N),m);case M:case _:return d(A+"Hours",0);case w:return d(A+"Minutes",1);case D:return d(A+"Seconds",2);case O:return d(A+"Milliseconds",3);default:return this.clone()}},r.endOf=function(t){return this.startOf(t,!1)},r.$set=function(t,n){var e,a=o.p(t),i="set"+(this.$u?"UTC":""),c=(e={},e[M]=i+"Date",e[_]=i+"Date",e[g]=i+"Month",e[u]=i+"FullYear",e[w]=i+"Hours",e[D]=i+"Minutes",e[O]=i+"Seconds",e[S]=i+"Milliseconds",e)[a],d=a===M?this.$D+(n-this.$W):n;if(a===g||a===u){var h=this.clone().set(_,1);h.$d[c](d),h.init(),this.$d=h.set(_,Math.min(this.$D,h.daysInMonth())).$d}else c&&this.$d[c](d);return this.init(),this},r.set=function(t,n){return this.clone().$set(t,n)},r.get=function(t){return this[o.p(t)]()},r.add=function(t,n){var e,a=this;t=Number(t);var i=o.p(n),c=function(m){var v=f(a);return o.w(v.date(v.date()+Math.round(m*t)),a)};if(i===g)return this.set(g,this.$M+t);if(i===u)return this.set(u,this.$y+t);if(i===M)return c(1);if(i===L)return c(7);var d=(e={},e[D]=E,e[w]=I,e[O]=T,e)[i]||1,h=this.$d.getTime()+t*d;return o.w(h,this)},r.subtract=function(t,n){return this.add(-1*t,n)},r.format=function(t){var n=this,e=this.$locale();if(!this.isValid())return e.invalidDate||C;var a=t||"YYYY-MM-DDTHH:mm:ssZ",i=o.z(this),c=this.$H,d=this.$m,h=this.$M,m=e.weekdays,v=e.months,A=e.meridiem,U=function($,k,z,q){return $&&($[k]||$(n,a))||z[k].slice(0,q)},N=function($){return o.s(c%12||12,$,"0")},H=A||function($,k,z){var q=$<12?"AM":"PM";return z?q.toLowerCase():q};return a.replace(P,function($,k){return k||function(z){switch(z){case"YY":return String(n.$y).slice(-2);case"YYYY":return o.s(n.$y,4,"0");case"M":return h+1;case"MM":return o.s(h+1,2,"0");case"MMM":return U(e.monthsShort,h,v,3);case"MMMM":return U(v,h);case"D":return n.$D;case"DD":return o.s(n.$D,2,"0");case"d":return String(n.$W);case"dd":return U(e.weekdaysMin,n.$W,m,2);case"ddd":return U(e.weekdaysShort,n.$W,m,3);case"dddd":return m[n.$W];case"H":return String(c);case"HH":return o.s(c,2,"0");case"h":return N(1);case"hh":return N(2);case"a":return H(c,d,!0);case"A":return H(c,d,!1);case"m":return String(d);case"mm":return o.s(d,2,"0");case"s":return String(n.$s);case"ss":return o.s(n.$s,2,"0");case"SSS":return o.s(n.$ms,3,"0");case"Z":return i}return null}($)||i.replace(":","")})},r.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},r.diff=function(t,n,e){var a,i=this,c=o.p(n),d=f(t),h=(d.utcOffset()-this.utcOffset())*E,m=this-d,v=function(){return o.m(i,d)};switch(c){case u:a=v()/12;break;case g:a=v();break;case l:a=v()/3;break;case L:a=(m-h)/6048e5;break;case M:a=(m-h)/864e5;break;case w:a=m/I;break;case D:a=m/E;break;case O:a=m/T;break;default:a=m}return e?a:o.a(a)},r.daysInMonth=function(){return this.endOf(g).$D},r.$locale=function(){return p[this.$L]},r.locale=function(t,n){if(!t)return this.$L;var e=this.clone(),a=J(t,n,!0);return a&&(e.$L=a),e},r.clone=function(){return o.w(this.$d,this)},r.toDate=function(){return new Date(this.valueOf())},r.toJSON=function(){return this.isValid()?this.toISOString():null},r.toISOString=function(){return this.$d.toISOString()},r.toString=function(){return this.$d.toUTCString()},s}(),rt=Z.prototype;return f.prototype=rt,[["$ms",S],["$s",O],["$m",D],["$H",w],["$W",M],["$M",g],["$y",u],["$D",_]].forEach(function(s){rt[s[1]]=function(r){return this.$g(r,s[0],s[1])}}),f.extend=function(s,r){return s.$i||(s(r,Z,f),s.$i=!0),f},f.locale=J,f.isDayjs=W,f.unix=function(s){return f(1e3*s)},f.en=p[j],f.Ls=p,f.p={},f})})(ot);var kt=ot.exports;const xt=Ot(kt),Tt={class:"data-container"},Et={class:"flex justify-between mb-4"},Ct={class:"mt-4 flex justify-end"},et=10,Yt={__name:"Users",setup(b){const F=G(""),T=G(1),E=$t(),I=G(!1),S=G(),O=async()=>{try{I.value=!0;const l=await it({method:"get",url:"/api/users",timeout:1e4});S.value=l.users,E.users=l.users}catch(l){console.error("用户数据加载失败:",l),Q.error("用户数据加载失败")}finally{I.value=!1}};vt(()=>{O()});const D=l=>xt(l).format("YYYY-MM-DD HH:mm"),w=st(()=>{const l=F.value.toLowerCase();return(S.value||[]).filter(u=>{var _,C;return((_=u.phone)==null?void 0:_.includes(l))||((C=u.id)==null?void 0:C.toString().includes(l))})}),M=st(()=>{const l=(T.value-1)*et;return w.value.slice(l,l+et)}),L=async l=>{try{await nt.confirm("确定删除该用户？此操作不可恢复！","警告",{confirmButtonText:"确认删除",cancelButtonText:"取消",type:"error",center:!0}),await it({method:"delete",url:`/api/users/${l.id}`,headers:{"Content-Type":"application/json"}}),S.value=S.value.filter(u=>u.id!==l.id),Q.success("用户删除成功")}catch(u){u.response?Q.error(`删除失败: ${u.response.data.message}`):Q.error("网络连接异常")}},g=l=>{nt.alert(`
    <div class="user-detail">
      <p><strong>用户ID：</strong>${l.id}</p>
      <p><strong>手机号：</strong>${l.phone}</p>
      <p><strong>注册时间：</strong>${D(l.registerTime)}</p>
      <p><strong>管理员：</strong>${l.isAdmin?"是":"否"}</p>
    </div>
  `,"用户详情",{dangerouslyUseHTMLString:!0,customClass:"user-detail-modal"})};return(l,u)=>{const _=ut,C=pt,Y=ft,P=mt,K=ct,B=ht,R=dt,j=lt;return at(),yt("div",Tt,[y(R,{shadow:"never"},{default:x(()=>[X("div",Et,[u[2]||(u[2]=X("h2",{class:"text-lg font-bold"},"用户管理",-1)),y(C,{modelValue:F.value,"onUpdate:modelValue":u[0]||(u[0]=p=>F.value=p),placeholder:"搜索用户姓名/ID",clearable:"",style:{width:"240px"}},{prefix:x(()=>[y(_,null,{default:x(()=>[y(_t(Mt))]),_:1})]),_:1},8,["modelValue"])]),Dt((at(),wt(B,{data:M.value,stripe:""},{default:x(()=>[y(Y,{prop:"id",label:"用户ID",width:"200"}),y(Y,{prop:"isAdmin",label:"身份"},{default:x(({row:p})=>[tt(bt(p.isAdmin?"是":"否"),1)]),_:1}),y(Y,{prop:"phone",label:"手机号码"}),y(Y,{prop:"registerTime",label:"注册日期",formatter:(p,V,W)=>D(W)},null,8,["formatter"]),y(Y,{label:"操作",width:"150"},{default:x(({row:p})=>[y(P,{type:"primary",size:"small",onClick:V=>g(p)},{default:x(()=>u[3]||(u[3]=[tt(" 详情 ")])),_:2},1032,["onClick"]),y(P,{type:"danger",size:"small",onClick:V=>L(p)},{default:x(()=>u[4]||(u[4]=[tt(" 删除 ")])),_:2},1032,["onClick"])]),_:1}),X("div",Ct,[y(K,{"current-page":T.value,"onUpdate:currentPage":u[1]||(u[1]=p=>T.value=p),"page-size":et,total:w.value.length,layout:"prev, pager, next, jumper",background:""},null,8,["current-page","total"])])]),_:1},8,["data"])),[[j,I.value]])]),_:1})])}}},ae=gt(Yt,[["__scopeId","data-v-bee2f6a4"]]);export{ae as default};
