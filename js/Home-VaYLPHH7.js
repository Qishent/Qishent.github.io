import{_ as W,u as G,r as m,c as K,o as D,a as i,b as e,d as a,w as u,e as C,T as O,f as v,t as p,F as k,g as E,h as w,i as M,j as n,k as L,l as X,m as j,v as N,n as y,p as Y,q as Z}from"./index-Bcu1wmac.js";import{E as ee}from"./base-FLaoZt01.js";import{E as te}from"./el-button-CRAMnhDp.js";import{E as oe,a as se}from"./el-carousel-item-Cbw0ILFx.js";import{u as re}from"./adminStore-tOVbcO9_.js";import{u as ne}from"./productionStore-BrzfKA_u.js";import{u as le}from"./errorStor-DWdgziwZ.js";import{r as ae}from"./request-D62Ehise.js";import{E as R}from"./el-message-BwHjNfu0.js";import"./use-global-config-7ehr_DJ7.js";import"./use-form-common-props-aUHwGn2-.js";import"./index-BOEJgLbD.js";import"./vnode-BZtwkAGT.js";import"./event-BB_Ol6Sd.js";import"./throttle-Bw0pxitG.js";import"./debounce-JVZbjxIQ.js";import"./aria-Dcom87Zv.js";const ie={class:"header"},ue={class:"mobile-nav"},ce=["onClick"],de={key:1,class:"nav desktop-nav"},me={key:0,class:"user-info"},pe=["src"],ge={class:"logout-menu"},fe={key:1,class:"login"},ve={class:"main"},_e={class:"background_img"},he=["src","alt"],ke={class:"banner"},ye={class:"grid_container"},be=["src","alt"],Se={style:{"margin-top":"10px"}},Ce={style:{color:"red"}},Ee={style:{"margin-top":"10px"}},we={__name:"Home",setup(Pe){const g=Y(),q=Z(),d=G(),T=re(),V=ne(),$=le(),b=m(!1);d.initialize();const P=K(()=>{var t;const o=JSON.parse(localStorage.getItem("users"));if(o){const s=o.find(l=>l.phone===d.userInfo.phone);return s==null?void 0:s.isAdmin}return d.userInfo.isAdmin||((t=d.userInfo.roles)==null?void 0:t.includes("admin"))}),B=()=>{P.value&&g.push("/Admin")},H=()=>{d.logout(),localStorage.removeItem("auth"),g.push("/")},U=o=>{g.push({name:"DetailsPage",params:{id:o}})},S=m({});(async()=>{try{const o=await ae({method:"get",url:"/api/productions",timeout:1e4});if(o.success&&Array.isArray(o.productions)){const t=o.productions.reduce((s,l)=>{const c=l.type||"其他";return s[c]||(s[c]=[]),s[c].push(l),s},{});S.value=Object.entries(t).reduce((s,[l,c])=>(s[l]=c[Math.floor(Math.random()*c.length)],s),{}),T.totalProductions(o.productions.length),V.saveProductions(o.productions)}else console.error("响应数据格式错误:",o)}catch(o){console.error("完整错误详情：",o),o.code==="ECONNABORTED"?R.error("请求超时，请检查网络连接"):R.error(`数据获取失败：${o.message}`),$.setError(o.status,o.message),g.push("/Error")}return S.value})();let x=m([]);D(async()=>{const o=Object.assign({"/src/assets/img/background_img/background_img1.jpg":()=>w(()=>import("./background_img1-BRA38NSN.js"),[]),"/src/assets/img/background_img/background_img2.jpg":()=>w(()=>import("./background_img2-BJzPsmrO.js"),[]),"/src/assets/img/background_img/background_img3.jpg":()=>w(()=>import("./background_img3-B0mQlgMg.js"),[])}),t=await Promise.all(Object.keys(o).map(async(s,l)=>({url:(await o[s]()).default,alt:`背景图 ${l+1}`,index:l+1})));x.value=t});const f=m(!1),_=m(!1);D(()=>{const o=()=>{_.value=window.innerWidth<768};o(),window.addEventListener("resize",o)});const z=m([{path:"/Home",text:"首页"},{path:"/PomegranateShop",text:"石榴商城"},{path:"/PomegranateStory",text:"石榴故事"},{path:"/AboutUs",text:"关于我们"}]),F=o=>{f.value=!1,g.push(o)};return(o,t)=>{const s=ee,l=M("router-link"),c=se,Q=oe,A=M("DArrowRight"),I=te;return n(),i(k,null,[e("div",ie,[t[7]||(t[7]=e("div",{class:"logo"},[e("img",{alt:"pomegranate_logo",src:"/public/pomegranate_logo.svg",width:"50px",height:"65px"}),e("strong",null,"蒙自石榴旗舰店")],-1)),_.value?(n(),i("div",{key:0,class:"mobile-menu-btn",onClick:t[0]||(t[0]=r=>f.value=!f.value)},[a(s,{size:24},{default:u(()=>[(n(),L(X(f.value?"CircleClose":"Menu")))]),_:1})])):C("",!0),a(O,{name:"slide-down"},{default:u(()=>[j(e("div",ue,[(n(!0),i(k,null,E(z.value,(r,h)=>(n(),i("a",{key:h,onClick:J=>F(r.path)},p(r.text),9,ce))),128))],512),[[N,_.value&&f.value]])]),_:1}),_.value?C("",!0):(n(),i("div",de,t[3]||(t[3]=[e("a",{href:"/Home"},"首页",-1),e("a",{href:"/PomegranateShop",target:"_blank"},"石榴商城",-1),e("a",{href:"/PomegranateStory",target:"_blank"},"石榴故事",-1),e("a",{href:"/AboutUs",target:"_blank"},"关于我们",-1)]))),e("div",{class:"user-container",onMouseenter:t[1]||(t[1]=r=>b.value=!0),onMouseleave:t[2]||(t[2]=r=>b.value=!1)},[v(d).isLoggedIn?(n(),i("div",me,[e("img",{src:v(d).userInfo.avatar,alt:"头像",class:"avatar"},null,8,pe),e("span",null,p(v(d).userInfo.phone),1),a(O,{name:"fade"},{default:u(()=>[j(e("div",ge,[e("div",{class:"menu-item",onClick:H},t[4]||(t[4]=[e("span",null,"退出登录",-1)])),P.value?(n(),i("div",{key:0,class:"menu-item",onClick:B},t[5]||(t[5]=[e("span",null,"后台管理",-1)]))):C("",!0)],512),[[N,b.value]])]),_:1})])):(n(),i("div",fe,[a(l,{to:{path:"/Login",query:{redirect:v(q).fullPath}}},{default:u(()=>t[6]||(t[6]=[e("i",{title:"登录",class:"iconfont icon-denglu-yonghu"},null,-1)])),_:1},8,["to"])]))],32)]),e("div",ve,[e("div",_e,[a(Q,{trigger:"click",height:"680px","motion-blur":"","interval:8000":""},{default:u(()=>[(n(!0),i(k,null,E(v(x),r=>(n(),L(c,{key:r},{default:u(()=>[e("img",{src:r.url,alt:r.alt,style:{width:"100%",height:"100%","object-fit":"cover"}},null,8,he)]),_:2},1024))),128))]),_:1})]),e("div",ke,[t[12]||(t[12]=e("h1",null,"品类精选",-1)),e("div",ye,[(n(!0),i(k,null,E(S.value,(r,h)=>(n(),i("div",{class:"card",key:h},[e("h2",null,p(h)+"推荐",1),e("img",{src:r.image,alt:r.name},null,8,be),e("h3",null,p(r.name),1),e("span",null,p(r.description),1),e("p",Se,[t[8]||(t[8]=y(" 价格:")),e("span",Ce,"¥"+p(r.price.toFixed(2)),1),t[9]||(t[9]=y("元 "))]),e("div",Ee,[a(l,{to:"/PomegranateShop"},{default:u(()=>[a(I,{type:"primary",plain:"",round:""},{default:u(()=>[t[10]||(t[10]=y(" 了解更多")),a(s,null,{default:u(()=>[a(A)]),_:1})]),_:1})]),_:1}),a(I,{type:"success",onClick:J=>U(r.id),plain:"",round:""},{default:u(()=>[t[11]||(t[11]=y(" 立即购买")),a(s,null,{default:u(()=>[a(A)]),_:1})]),_:2},1032,["onClick"])])]))),128))])])]),t[13]||(t[13]=e("footer",{class:"site-footer",role:"contentinfo"},[e("div",{class:"footer-container"},[e("div",{class:"footer-section"},[e("div",{class:"brand-info"},[e("h3",{class:"footer-title"},"红河州蒙自市石榴旗舰店"),e("div",{class:"copyright"},[e("p",null,"© 2021-2025 石榴品牌旗舰店"),e("p",null,"云、滇-红河州-蒙自市-532503-661100"),e("img",{src:"/public/social_media_img/certification.png",title:"工商认证标识",alt:"工商认证标识",class:"certification"})])])]),e("div",{class:"footer-section"},[e("h3",{class:"footer-title"},"客户服务"),e("ul",{class:"link-list"},[e("li",null,[e("a",{href:"/CustomerService"},"常见问题")]),e("li",null,[e("a",{href:"/CustomerService"},"配送政策")]),e("li",null,[e("a",{href:"/CustomerService"},"退换货指南")]),e("li",null,[e("a",{href:"/CustomerService"},"订单查询")])])]),e("div",{class:"footer-section"},[e("h3",{class:"footer-title"},"法律条款"),e("ul",{class:"link-list"},[e("li",null,[e("a",{href:"/CustomerService"},"隐私政策")]),e("li",null,[e("a",{href:"/CustomerService"},"服务协议")]),e("li",null,[e("a",{href:"/CustomerService"},"免责声明")]),e("li",null,[e("a",{href:"/CustomerService"},"网站地图")])])]),e("div",{class:"footer-section"},[e("h3",{class:"footer-title"},"关注我们"),e("div",{class:"contact-info"},[e("p",null,"客服热线:0873-114"),e("p",null,"服务时间:9:00-21:00"),e("p",null,"邮箱:3283089140@qq.com")]),e("div",{class:"social-media"},[e("a",{href:"#",class:"social-icon wechat",title:"微信公众号"}),e("a",{href:"#",class:"social-icon qq",title:"QQ群"}),e("a",{href:"#",class:"social-icon douyin",title:"抖音账号"}),e("a",{href:"#",class:"social-icon weibo",title:"官方微博"})])])])],-1))],64)}}},Fe=W(we,[["__scopeId","data-v-f08ac9ca"]]);export{Fe as default};
